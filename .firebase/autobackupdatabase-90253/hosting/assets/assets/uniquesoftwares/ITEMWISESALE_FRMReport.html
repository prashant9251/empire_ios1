<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="2.1.3/jquery.min.js"></script>
    <script src="3.3.6/bootstrap.min.js"></script>
    <link href="3.3.6/bootstrap.min.css" rel="stylesheet" />
    <script src="js/jsGetUrlParams.js"></script>

</head>

<script>
    var url = window.location.href;
    var MCNO = getUrlParams(url, "MCNO");
    var MTYPE = getUrlParams(url, "MTYPE");
    var DSN = getUrlParams(url, "DatabaseSource");
    var Currentyear = getUrlParams(url, "Currentyear");
</script>
<script src="js/localStorageSet.js"></script>
<script src="js/jsGetObjectByKey.js"></script>
<script src="js/jsStoreDatatoIndexeddb.js"></script>
<script src="js/jsPopUpTblSetting.js"></script>
<script src="js/jsoptionSeriesSelect.js"></script>
<script src="js/jsoptionFirmSelect.js"></script>
<script src="js/jsSearchfrm.js"></script>
<script>

</script>
<html>

<head>
    <title>Item Wise report</title>
    <link href="4.1.1/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link href="1.10.4/jquery-ui.css" rel="stylesheet">
    <script src="1.10.4/jquery-ui.js"></script>
    <link rel="stylesheet" href="css/stylePrint.css">
    <link rel="stylesheet" href="css/styleAutoComplete.css">

</head>

<body>


    <!--       <nav class="navbar navbar-icon-top navbar-expand-lg navbar-dark bg-dark">-->
    <!--           <H1 class="" style="color:white;" href="#">ITEM WISE SALE</H1>-->
    <!--   -->
    <!--       </nav>-->

    <BR>


    <div class="container" style="width: 100%;">

        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card">
                    <header class="card-header">
                        <h2 class="card-title mt-2">ItemWiseSale Form</h2>
                    </header>
                    <article class="card-body">
                        <form action="ITEMWISESALE_AJXREPORT.html" method="get" target="_blank" autocomplete="off">


                            <!------------------>

                            <div class="form-row">
                                <div class="col form-group">
                                    <h3>FIRM</h3>
                                    <select class="form-control inputText" style="height: 40px;" id="FIRM" name="FIRM">
                                    </select>
                                </div>

                                <div class="col form-group" style="display: none;">
                                    <h3>TYPE</h3>
                                    <input type="text" required class="form-control inputText" onfocus="this.value=''"
                                        placeholder="REPORT TYPE" value="" name="ReportType" id="ReportType">
                                    <input type="hidden" class="form-control inputText" onfocus="this.value=''"
                                        placeholder="REPORT TYPE" value="" name="ReportATypeCode" id="ReportATypeCode">
                                    <input type="hidden" class="form-control inputText" onfocus="this.value=''"
                                        placeholder="REPORT TYPE" value="" name="ReportSeriesTypeCode"
                                        id="ReportSeriesTypeCode">
                                    <input type="hidden" class="form-control inputText" onfocus="this.value=''"
                                        placeholder="REPORT TYPE" value="" name="ReportDOC_TYPECode"
                                        id="ReportDOC_TYPECode">
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="">
                                    <h3>PARTY NAME</h3><input class="form-control inputText" autocomplete="off"
                                        onclick="this.value=''" placeholder="SEARCH BY PARTY NAME" name="partyname"
                                        id="partyname">
                                </div>
                            </div>
                            <div class="form-group">
                                <h3>BROKER</h3>
                                <input class="form-control inputText" onfocus="this.value=''" autocomplete="off"
                                    name="broker" id="broker" placeholder="SEARCH BY BROKER NAME">
                            </div>
                            <div class="form-group">
                                <div class="">
                                    <h3> QUALITY NAME</h3> <input class="form-control inputText" autocomplete="off"
                                        onclick="this.value=''" placeholder="SEARCH BY QUALITY NAME" name="qualname"
                                        id="qualname">
                                    <input type="hidden" class="form-control inputText" autocomplete="off"
                                        onclick="this.value=''" placeholder="SEARCH BY QUALITY NAME" name="qualcode"
                                        id="qualcode">
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="">
                                    <h3>MAIN SCREEN</h3> <input class="form-control inputText" autocomplete="off"
                                        onclick="this.value=''" placeholder="SEARCH BY MAIN SCREEN " name="mainqualname"
                                        id="mainqualname">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col form-group">
                                    <h3>FROM</h3>
                                    <input type="date" class="form-control inputText" placeholder="SEARCH FROM DATE"
                                        value="" name="search_FromDate" id="search_FromDate">
                                </div>

                                <div class="col form-group">
                                    <h3>TO</h3>
                                    <input type="date" class="form-control inputText" placeholder="SEARCH TO DATE"
                                        value="" name="search_ToDate" id="search_ToDate">
                                </div>
                            </div>


                            <div class="form-group">
                                <input type="hidden" class="form-control " id="firm" name="firm" value=""
                                    placeholder="hidden party code">
                                <input type="hidden" class="form-control" id="partycode" name="partycode"
                                    placeholder="hidden party code">
                                <input type="hidden" class="form-control" id="ntab" name="ntab" value="NTAB"
                                    placeholder="hidden party code">
                                <input type="hidden" class="form-control" id="mobileNo" name="mobileNo" value="">
                                <input type="hidden" class="form-control" id="partyEmail" name="partyEmail" value="">
                            </div>


                            <div class="form-group" id="">
                                <div style="width:50%;float:left;">
                                    <h3>SUMMARY REPORT</h3>
                                </div>
                                <div style="width:50%;float:right;">
                                    <input type="checkbox" class="form-control" name="hideAbleTr" id="hideAbleTr"
                                        value="true" />
                                </div>
                                <br><br><br>
                            </div>
                            <div class="form-group">

                                <input type="submit" name="submit" id="submit"
                                    class="btn btn-primary btn-lg btn-block inputText" value="SUBMIT" id="submit">
                            </div>

                        </form>
                    </article>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    $(document).ready(function () {
        SelectFirmOptions("FIRM");
        var QULData;
        jsGetObjectByKey(DSN, "QUL", "").then(function (data) {
            QULData = data;
            $("#qualname").keyup(function (e) {
                if (e.which == 38 || e.which == 40 || e.which == 13) {
                    return;
                } else {
                    var qual = $(this).val();
                    //alert(qual);
                    if (qual !== "") {
                        if (QULData.length > 0) {
                            //console.log("----" + qual);
                            $("#qualname").autocomplete({
                                minLength: 1,
                                source: function (request, response) {
                                    var term = $.ui.autocomplete.escapeRegex(
                                        request.term
                                    ),
                                        startsWithMatcher = new RegExp("^" + term, "i"),
                                        startsWith = $.grep(QULData, function (
                                            value
                                        ) {
                                            return startsWithMatcher.test(
                                                value.label || value.value || value
                                            );
                                        }),
                                        containsMatcher = new RegExp(term, "i"),
                                        contains = $.grep(QULData, function (value) {
                                            return (
                                                $.inArray(value, startsWith) < 0 &&
                                                containsMatcher.test(
                                                    value.label || value.value || value
                                                )
                                            );
                                        });

                                    response(startsWith.concat(contains));
                                },
                                select: function (event, ui) {
                                    event.preventDefault();
                                    $(this).val(ui.item.label);
                                    $("#qualcode").val(ui.item.value);
                                    $("#qualname").val(ui.item.label);
                                },
                            });
                        }
                    }
                }
            });

            //---------
            $("#mainqualname").keyup(function (e) {
                if (e.which == 38 || e.which == 40 || e.which == 13) {
                    return;
                } else {
                    var qual = $(this).val();
                    //alert(qual);
                    if (qual !== "") {
                        if (QULData.length > 0) {
                            //console.log("----" + qual);
                            $("#mainqualname").autocomplete({
                                minLength: 1,
                                source: function (request, response) {
                                    var term = $.ui.autocomplete.escapeRegex(
                                        request.term
                                    ),
                                        startsWithMatcher = new RegExp("^" + term, "i"),
                                        startsWith = $.grep(QULData, function (
                                            value
                                        ) {
                                            return startsWithMatcher.test(
                                                value.label || value.value || value
                                            );
                                        }),
                                        containsMatcher = new RegExp(term, "i"),
                                        contains = $.grep(QULData, function (value) {
                                            return (
                                                $.inArray(value, startsWith) < 0 &&
                                                containsMatcher.test(
                                                    value.label || value.value || value
                                                )
                                            );
                                        });

                                    response(startsWith.concat(contains));
                                },
                                select: function (event, ui) {
                                    event.preventDefault();
                                    $(this).val(ui.item.label);
                                    $("#mainqualname").val(ui.item.value);
                                    selectQualArrayfromMainScreen(ui.item.value)
                                },
                            });
                        }
                    }
                }
            });

        });

        function selectQualArrayfromMainScreen(MainScreenName) {
            array = QULData.filter(function (d) {
                return d.MS == MainScreenName;
            }).map(function (subdata) {
                return subdata.value

            })
            //console.log(array);
            localStorage.setItem('MainScreenQualArray', JSON.stringify(array));
        }
        //----------------packing-------------------
        var PACKINGSTYLEData = JSON.parse(localStorage.getItem("PACKING"));

        $("#packingstyle").keyup(function (e) {
            if (e.which == 38 || e.which == 40 || e.which == 13) {
                return;
            } else {
                var packingstyle = $(this).val();
                //alert(packingstyle);
                if (packingstyle != "") {
                    //console.log("----" + packingstyle);
                    $("#packingstyle").autocomplete({
                        source: PACKINGSTYLEData,
                        select: function (event, ui) {
                            event.preventDefault();
                            $(this).val(ui.item.label);
                            $("#packingstylecode").val(ui.item.value);
                            $("#packingstyle").val(ui.item.label);
                        },
                    });
                }
            }
        });

    });

</script>