{
    "sourceFile": "COMM_AJXREPORT.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1638352475104,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1649653612660,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,47 +1,47 @@\n <html>\r\n \r\n <head>\r\n-  <title> OUTSTANDING </title>\r\n-  <link rel=\"stylesheet\" type=\"text/css\" href=\"css/style.css\">\r\n-  <link href=\"4.1.1/bootstrap.min.css\" rel=\"stylesheet\" id=\"bootstrap-css\">\r\n-  <link href=\"1.10.4/jquery-ui.css\" rel=\"stylesheet\">\r\n-  <script src=\"1.10.2/jquery.js\"></script>\r\n-  <script src=\"1.10.4/jquery-ui.js\"></script>\r\n-  <script src=\"js/jsGetUrlParams.js\"></script>\r\n+    <title> OUTSTANDING </title>\r\n+    <link rel=\"stylesheet\" type=\"text/css\" href=\"css/style.css\">\r\n+    <link href=\"4.1.1/bootstrap.min.css\" rel=\"stylesheet\" id=\"bootstrap-css\">\r\n+    <link href=\"1.10.4/jquery-ui.css\" rel=\"stylesheet\">\r\n+    <script src=\"1.10.2/jquery.js\"></script>\r\n+    <script src=\"1.10.4/jquery-ui.js\"></script>\r\n+    <script src=\"js/jsGetUrlParams.js\"></script>\r\n \r\n </head>\r\n <Style>\r\n \r\n </Style>\r\n \r\n <body>\r\n-  <div align=\"center\" class=\"table-responsive\">\r\n-    <table id=\"result\" class=\"content-table\">\r\n-    </table>\r\n-  </div>\r\n+    <div align=\"center\" class=\"table-responsive\">\r\n+        <table id=\"result\" class=\"content-table\">\r\n+        </table>\r\n+    </div>\r\n \r\n \r\n-  <div style=\"display: none;\" id=\"loader\">\r\n-    <div class=\"loader\"></div>\r\n-    <div style=\"text-align: center; margin-top: -80px; font-weight:700\">Please wait...</div>\r\n-  </div>\r\n+    <div style=\"display: none;\" id=\"loader\">\r\n+        <div class=\"loader\"></div>\r\n+        <div style=\"text-align: center; margin-top: -80px; font-weight:700\">Please wait...</div>\r\n+    </div>\r\n </body>\r\n \r\n </html>\r\n <script>\r\n-  var url = window.location.href;\r\n-  var DSN = getUrlParams(url, \"DatabaseSource\");\r\n-  var SUBTOTAL = getUrlParams(url, \"SUBTOTAL\");\r\n-        if (SUBTOTAL == 'DATE WISE') {\r\n-            var my_awesome_script = document.createElement('script');\r\n-            my_awesome_script.setAttribute('src', 'js/jsLoadCallCOMM_DATEWISE.js');\r\n-            document.head.appendChild(my_awesome_script);\r\n-        } else {\r\n-            var my_awesome_script = document.createElement('script');\r\n-            my_awesome_script.setAttribute('src', 'js/jsLoadCallCOMM.js');\r\n-            document.head.appendChild(my_awesome_script);\r\n-        }\r\n+    var url = window.location.href;\r\n+    var DSN = getUrlParams(url, \"DatabaseSource\");\r\n+    var SUBTOTAL = getUrlParams(url, \"SUBTOTAL\");\r\n+    if (SUBTOTAL == 'DATE WISE') {\r\n+        var my_awesome_script = document.createElement('script');\r\n+        my_awesome_script.setAttribute('src', 'js/jsLoadCallCOMM_DATEWISE.js');\r\n+        document.head.appendChild(my_awesome_script);\r\n+    } else {\r\n+        var my_awesome_script = document.createElement('script');\r\n+        my_awesome_script.setAttribute('src', 'js/jsLoadCallCOMM.js');\r\n+        document.head.appendChild(my_awesome_script);\r\n+    }\r\n </script>\r\n <script src=\"js/localStorageGet.js\"></script>\r\n <script src=\"js/jsopenSubReportCOMM.js\"></script>\r\n <script src=\"js/jsGetUrlParams.js\"></script>\r\n@@ -53,160 +53,170 @@\n <script src=\"js/jsfunction.js\"></script>\r\n <script src=\"js/jsgetValueNotDefine.js\"></script>\r\n <script>\r\n \r\n-  var url = window.location.href;\r\n-  var pdfStatus = false;\r\n-  var Data;\r\n-  var PAID = 'N';\r\n-  var ATYPE = '1';\r\n-  var tr = '';\r\n-  var FIRM = getUrlParams(url, \"FIRM\");\r\n-  var cno = '';\r\n-  var EMP;\r\n-  var partyname = getUrlParams(url, \"partyname\");\r\n-  var partycode = getUrlParams(url, \"partycode\");\r\n-  var ccd = getUrlParams(url, \"ccd\");\r\n-  var ccdcode = getUrlParams(url, \"ccdcode\");\r\n-  if (ccd == '') {\r\n-    ccdcode = '';\r\n-  }\r\n-  if (partyname == '') {\r\n-    partycode = '';\r\n-  }\r\n-  var broker = getUrlParams(url, \"broker\");\r\n-  var CITY = getUrlParams(url, \"city\");\r\n-  var haste = getUrlParams(url, \"haste\");\r\n-  var fromdate = getUrlParams(url, \"search_FromDate\");\r\n-  var todate = getUrlParams(url, \"search_ToDate\");\r\n-  var DAYSCONDITION = getUrlParams(url, \"DAYSCONDITION\");\r\n-  GRD = getUrlParams(url, \"GRD\");\r\n-  var DataCompmst = JSON.parse(localStorage.getItem(\"COMPMST\"));\r\n-  var nowDate = new Date();\r\n-  if (FIRM != '') {\r\n-    for (var i = 0; i < DataCompmst.length; i++) {\r\n-      if (DataCompmst[i].FIRM == FIRM) {\r\n-        cno = DataCompmst[i].CNO;\r\n-      }\r\n+    var url = window.location.href;\r\n+    var pdfStatus = false;\r\n+    var Data;\r\n+    var PAID = 'N';\r\n+    var ATYPE = '1';\r\n+    var tr = '';\r\n+    var FIRM = getUrlParams(url, \"FIRM\");\r\n+    var cno = '';\r\n+    var EMP;\r\n+    var partyname = getUrlParams(url, \"partyname\");\r\n+    var partycode = getUrlParams(url, \"partycode\");\r\n+    var ccd = getUrlParams(url, \"ccd\");\r\n+    var ccdcode = getUrlParams(url, \"ccdcode\");\r\n+    if (ccd == '') {\r\n+        ccdcode = '';\r\n     }\r\n-  }\r\n+    if (partyname == '') {\r\n+        partycode = '';\r\n+    }\r\n+    var broker = getUrlParams(url, \"broker\");\r\n+    var CITY = getUrlParams(url, \"city\");\r\n+    var haste = getUrlParams(url, \"haste\");\r\n+    var fromdate = getUrlParams(url, \"search_FromDate\");\r\n+    var todate = getUrlParams(url, \"search_ToDate\");\r\n+    var DAYSCONDITION = getUrlParams(url, \"DAYSCONDITION\");\r\n+    GRD = getUrlParams(url, \"GRD\");\r\n+    var DataCompmst = JSON.parse(localStorage.getItem(\"COMPMST\"));\r\n+    var nowDate = new Date();\r\n+    if (FIRM != '') {\r\n+        for (var i = 0; i < DataCompmst.length; i++) {\r\n+            if (DataCompmst[i].FIRM == FIRM) {\r\n+                cno = DataCompmst[i].CNO;\r\n+            }\r\n+        }\r\n+    }\r\n </script>\r\n <script>\r\n-  document.title = \"COMM. REPORT \" + partyname + \" \" + broker + \" \" + CITY;\r\n-  $(document).ready(function () {\r\n-    $(\"#loader\").addClass('has-loader');\r\n-    load_data();\r\n-  });\r\n-  function load_data() {\r\n-    jsGetObjectByKey(DSN, \"MST\", \"\").then(function (data) {\r\n-      masterData = data;\r\n+    document.title = \"COMM. REPORT \" + partyname + \" \" + broker + \" \" + CITY;\r\n+    $(document).ready(function () {\r\n+        $(\"#loader\").addClass('has-loader');\r\n+        load_data();\r\n+    });\r\n+    function load_data() {\r\n+        jsGetObjectByKey(DSN, \"COMPMST\", \"\").then(function (DD) {\r\n+            DataCompmst = DD;\r\n+            if (FIRM != '') {\r\n+                for (var i = 0; i < DataCompmst.length; i++) {\r\n+                    if (DataCompmst[i].FIRM == FIRM) {\r\n+                        cno = DataCompmst[i].CNO;\r\n+                    }\r\n+                }\r\n+            }\r\n+            jsGetObjectByKey(DSN, \"MST\", \"\").then(function (data) {\r\n+                masterData = data;\r\n \r\n-      jsGetObjectByKey(DSN, \"COMM\", \"\").then(function (data) {\r\n-        Data = data;\r\n+                jsGetObjectByKey(DSN, \"COMM\", \"\").then(function (data) {\r\n+                    Data = data;\r\n \r\n-        if (ReportATypeCode != \"\" && ReportATypeCode != null && ReportATypeCode != undefined) {\r\n-            Data = Data.filter(function (data) {\r\n-                return data['ATP'] == ReportATypeCode;\r\n-            })\r\n-        }\r\n-        if (ReportType != '' && ReportType != null && ReportType != undefined && ReportType == \"COMMISSION RECEIVED\") {\r\n-            Data = Data.filter(function (data) {\r\n-                return data.billDetails.some((billDetails) => billDetails['RDT'] != \"\" && billDetails['RDT'] != null);\r\n-            }).map(function (subdata) {\r\n-                return {\r\n-                    COD: subdata.COD,\r\n-                    ATP: subdata.ATP,\r\n-                    billDetails: subdata.billDetails.filter(function (billDetails) {\r\n-                        return (billDetails['RDT'] != \"\" && billDetails['RDT'] != null);\r\n-                    })\r\n-                }\r\n-            })\r\n-        }\r\n+                    if (ReportATypeCode != \"\" && ReportATypeCode != null && ReportATypeCode != undefined) {\r\n+                        Data = Data.filter(function (data) {\r\n+                            return data['ATP'] == ReportATypeCode;\r\n+                        })\r\n+                    }\r\n+                    if (ReportType != '' && ReportType != null && ReportType != undefined && ReportType == \"COMMISSION RECEIVED\") {\r\n+                        Data = Data.filter(function (data) {\r\n+                            return data.billDetails.some((billDetails) => billDetails['RDT'] != \"\" && billDetails['RDT'] != null);\r\n+                        }).map(function (subdata) {\r\n+                            return {\r\n+                                COD: subdata.COD,\r\n+                                ATP: subdata.ATP,\r\n+                                billDetails: subdata.billDetails.filter(function (billDetails) {\r\n+                                    return (billDetails['RDT'] != \"\" && billDetails['RDT'] != null);\r\n+                                })\r\n+                            }\r\n+                        })\r\n+                    }\r\n \r\n-        if (ReportType != '' && ReportType != null && ReportType != undefined && ReportType == \"COMMISSION PENDING\") {\r\n-            Data = Data.filter(function (data) {\r\n-                return data.billDetails.some((billDetails) => (billDetails['RDT'] == \"\" || billDetails['RDT'] == null) || (billDetails['CPA'] != 0 && billDetails['CPA'] != \"\" && billDetails['CPA'] != null));\r\n-            }).map(function (subdata) {\r\n-                return {\r\n-                    COD: subdata.COD,\r\n-                    ATP: subdata.ATP,\r\n-                    billDetails: subdata.billDetails.filter(function (billDetails) {\r\n-                        return ((billDetails['RDT'] == \"\" || billDetails['RDT'] == null) || (billDetails['CPA'] != 0 && billDetails['CPA'] != \"\" && billDetails['CPA'] != null));\r\n-                    })\r\n-                }\r\n-            })\r\n-        }\r\n-        if (cno != '' && cno != null) {\r\n-            Data = Data.filter(function (data) {\r\n-                return data.billDetails.some((billDetails) => billDetails['CNO'] === cno);\r\n-            }).map(function (subdata) {\r\n-                return {\r\n-                    COD: subdata.COD,\r\n-                    ATP: subdata.ATP,\r\n-                    billDetails: subdata.billDetails.filter(function (billDetails) {\r\n-                        return (billDetails['CNO'] === cno);\r\n-                    })\r\n-                }\r\n-            })\r\n-        }\r\n+                    if (ReportType != '' && ReportType != null && ReportType != undefined && ReportType == \"COMMISSION PENDING\") {\r\n+                        Data = Data.filter(function (data) {\r\n+                            return data.billDetails.some((billDetails) => (billDetails['RDT'] == \"\" || billDetails['RDT'] == null) || (billDetails['CPA'] != 0 && billDetails['CPA'] != \"\" && billDetails['CPA'] != null));\r\n+                        }).map(function (subdata) {\r\n+                            return {\r\n+                                COD: subdata.COD,\r\n+                                ATP: subdata.ATP,\r\n+                                billDetails: subdata.billDetails.filter(function (billDetails) {\r\n+                                    return ((billDetails['RDT'] == \"\" || billDetails['RDT'] == null) || (billDetails['CPA'] != 0 && billDetails['CPA'] != \"\" && billDetails['CPA'] != null));\r\n+                                })\r\n+                            }\r\n+                        })\r\n+                    }\r\n+                    if (cno != '' && cno != null) {\r\n+                        Data = Data.filter(function (data) {\r\n+                            return data.billDetails.some((billDetails) => billDetails['CNO'] === cno);\r\n+                        }).map(function (subdata) {\r\n+                            return {\r\n+                                COD: subdata.COD,\r\n+                                ATP: subdata.ATP,\r\n+                                billDetails: subdata.billDetails.filter(function (billDetails) {\r\n+                                    return (billDetails['CNO'] === cno);\r\n+                                })\r\n+                            }\r\n+                        })\r\n+                    }\r\n \r\n-        console.log(Data);\r\n-        \r\n-        if (ccdcode != '' && ccdcode != null) {\r\n-            console.log(ccd, ccdcode);\r\n-            Data = Data.filter(function (data) {\r\n-                return data['COD'] == ccdcode;\r\n-            })\r\n-        }\r\n+                    console.log(Data);\r\n \r\n-        console.log(Data);\r\n-        if (partyname != '' && partyname != null) {\r\n-            console.log(partyname, partycode);\r\n-            Data = Data.filter(function (data) {\r\n-                return data.billDetails.some((billDetails) => billDetails['ccd'] == partyname);\r\n-            }).map(function (subdata) {\r\n-                return {\r\n-                    COD: subdata.COD,\r\n-                    ATP: subdata.ATP,\r\n-                    billDetails: subdata.billDetails.filter(function (billDetails) {\r\n-                        return (billDetails['ccd'] == partyname);\r\n-                    })\r\n-                }\r\n-            })\r\n-        }\r\n-        if (fromdate !== '' && fromdate !== null) {\r\n-            Data = Data.filter(function (data) {\r\n-                return data.billDetails.some((billDetails) => new Date(billDetails.RDT).setHours(0, 0, 0, 0) >= new Date(fromdate).setHours(0, 0, 0, 0));\r\n-            }).map(function (subdata) {\r\n-                return {\r\n-                    COD: subdata.COD,\r\n-                    ATP: subdata.ATP,\r\n-                    billDetails: subdata.billDetails.filter(function (billDetails) {\r\n-                        return new Date(billDetails.RDT).setHours(0, 0, 0, 0) >= new Date(fromdate).setHours(0, 0, 0, 0);\r\n-                    })\r\n-                }\r\n-            })\r\n-        }\r\n-        if (todate !== '' && todate !== null) {\r\n-            Data = Data.filter(function (data) {\r\n-                return data.billDetails.some((billDetails) => new Date(billDetails.RDT).setHours(24, 0, 0, 0) <= new Date(todate).setHours(24, 0, 0, 0));\r\n-            }).map(function (subdata) {\r\n-                return {\r\n-                    COD: subdata.COD,\r\n-                    ATP: subdata.ATP,\r\n-                    billDetails: subdata.billDetails.filter(function (billDetails) {\r\n-                        return new Date(billDetails.RDT).setHours(24, 0, 0, 0) <= new Date(todate).setHours(24, 0, 0, 0);\r\n-                    })\r\n-                }\r\n-            })\r\n-        }\r\n+                    if (ccdcode != '' && ccdcode != null) {\r\n+                        console.log(ccd, ccdcode);\r\n+                        Data = Data.filter(function (data) {\r\n+                            return data['COD'] == ccdcode;\r\n+                        })\r\n+                    }\r\n \r\n+                    console.log(Data);\r\n+                    if (partyname != '' && partyname != null) {\r\n+                        console.log(partyname, partycode);\r\n+                        Data = Data.filter(function (data) {\r\n+                            return data.billDetails.some((billDetails) => billDetails['ccd'] == partyname);\r\n+                        }).map(function (subdata) {\r\n+                            return {\r\n+                                COD: subdata.COD,\r\n+                                ATP: subdata.ATP,\r\n+                                billDetails: subdata.billDetails.filter(function (billDetails) {\r\n+                                    return (billDetails['ccd'] == partyname);\r\n+                                })\r\n+                            }\r\n+                        })\r\n+                    }\r\n+                    if (fromdate !== '' && fromdate !== null) {\r\n+                        Data = Data.filter(function (data) {\r\n+                            return data.billDetails.some((billDetails) => new Date(billDetails.RDT).setHours(0, 0, 0, 0) >= new Date(fromdate).setHours(0, 0, 0, 0));\r\n+                        }).map(function (subdata) {\r\n+                            return {\r\n+                                COD: subdata.COD,\r\n+                                ATP: subdata.ATP,\r\n+                                billDetails: subdata.billDetails.filter(function (billDetails) {\r\n+                                    return new Date(billDetails.RDT).setHours(0, 0, 0, 0) >= new Date(fromdate).setHours(0, 0, 0, 0);\r\n+                                })\r\n+                            }\r\n+                        })\r\n+                    }\r\n+                    if (todate !== '' && todate !== null) {\r\n+                        Data = Data.filter(function (data) {\r\n+                            return data.billDetails.some((billDetails) => new Date(billDetails.RDT).setHours(24, 0, 0, 0) <= new Date(todate).setHours(24, 0, 0, 0));\r\n+                        }).map(function (subdata) {\r\n+                            return {\r\n+                                COD: subdata.COD,\r\n+                                ATP: subdata.ATP,\r\n+                                billDetails: subdata.billDetails.filter(function (billDetails) {\r\n+                                    return new Date(billDetails.RDT).setHours(24, 0, 0, 0) <= new Date(todate).setHours(24, 0, 0, 0);\r\n+                                })\r\n+                            }\r\n+                        })\r\n+                    }\r\n \r\n-        loadCall(Data);\r\n-      });\r\n-    })\r\n-  }\r\n \r\n+                    loadCall(Data);\r\n+                });\r\n+            });\r\n+        })\r\n+    }\r\n \r\n+\r\n </script>\r\n \r\n <script src=\"js/jsHeaderTbl.js\"></script>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1649653626108,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -79,17 +79,10 @@\n     var fromdate = getUrlParams(url, \"search_FromDate\");\r\n     var todate = getUrlParams(url, \"search_ToDate\");\r\n     var DAYSCONDITION = getUrlParams(url, \"DAYSCONDITION\");\r\n     GRD = getUrlParams(url, \"GRD\");\r\n-    var DataCompmst = JSON.parse(localStorage.getItem(\"COMPMST\"));\r\n+    var DataCompmst = [];\r\n     var nowDate = new Date();\r\n-    if (FIRM != '') {\r\n-        for (var i = 0; i < DataCompmst.length; i++) {\r\n-            if (DataCompmst[i].FIRM == FIRM) {\r\n-                cno = DataCompmst[i].CNO;\r\n-            }\r\n-        }\r\n-    }\r\n </script>\r\n <script>\r\n     document.title = \"COMM. REPORT \" + partyname + \" \" + broker + \" \" + CITY;\r\n     $(document).ready(function () {\r\n"
                },
                {
                    "date": 1654959202057,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,9 +15,9 @@\n </Style>\r\n \r\n <body>\r\n     <div align=\"center\" class=\"table-responsive\">\r\n-        <table id=\"result\" class=\"content-table\">\r\n+        <table id=\"result\" class=\"content-table\" style=\"border-collapse: collapse;\">\r\n         </table>\r\n     </div>\r\n \r\n \r\n"
                },
                {
                    "date": 1656570375985,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -103,9 +103,9 @@\n                 masterData = data;\r\n \r\n                 jsGetObjectByKey(DSN, \"COMM\", \"\").then(function (data) {\r\n                     Data = data;\r\n-\r\n+                    console.log(Data)\r\n                     if (ReportATypeCode != \"\" && ReportATypeCode != null && ReportATypeCode != undefined) {\r\n                         Data = Data.filter(function (data) {\r\n                             return data['ATP'] == ReportATypeCode;\r\n                         })\r\n"
                }
            ],
            "date": 1638352475104,
            "name": "Commit-0",
            "content": "<html>\r\n\r\n<head>\r\n  <title> OUTSTANDING </title>\r\n  <link rel=\"stylesheet\" type=\"text/css\" href=\"css/style.css\">\r\n  <link href=\"4.1.1/bootstrap.min.css\" rel=\"stylesheet\" id=\"bootstrap-css\">\r\n  <link href=\"1.10.4/jquery-ui.css\" rel=\"stylesheet\">\r\n  <script src=\"1.10.2/jquery.js\"></script>\r\n  <script src=\"1.10.4/jquery-ui.js\"></script>\r\n  <script src=\"js/jsGetUrlParams.js\"></script>\r\n\r\n</head>\r\n<Style>\r\n\r\n</Style>\r\n\r\n<body>\r\n  <div align=\"center\" class=\"table-responsive\">\r\n    <table id=\"result\" class=\"content-table\">\r\n    </table>\r\n  </div>\r\n\r\n\r\n  <div style=\"display: none;\" id=\"loader\">\r\n    <div class=\"loader\"></div>\r\n    <div style=\"text-align: center; margin-top: -80px; font-weight:700\">Please wait...</div>\r\n  </div>\r\n</body>\r\n\r\n</html>\r\n<script>\r\n  var url = window.location.href;\r\n  var DSN = getUrlParams(url, \"DatabaseSource\");\r\n  var SUBTOTAL = getUrlParams(url, \"SUBTOTAL\");\r\n        if (SUBTOTAL == 'DATE WISE') {\r\n            var my_awesome_script = document.createElement('script');\r\n            my_awesome_script.setAttribute('src', 'js/jsLoadCallCOMM_DATEWISE.js');\r\n            document.head.appendChild(my_awesome_script);\r\n        } else {\r\n            var my_awesome_script = document.createElement('script');\r\n            my_awesome_script.setAttribute('src', 'js/jsLoadCallCOMM.js');\r\n            document.head.appendChild(my_awesome_script);\r\n        }\r\n</script>\r\n<script src=\"js/localStorageGet.js\"></script>\r\n<script src=\"js/jsopenSubReportCOMM.js\"></script>\r\n<script src=\"js/jsGetUrlParams.js\"></script>\r\n<script src=\"js/jsGetYearChange.js\"></script>\r\n<script src=\"js/jsGetDaysDif.js\"></script>\r\n<script src=\"js/jsGetDateFormate.js\"></script>\r\n<script src=\"js/jsGetObjectByKey.js\"></script>\r\n<script src=\"js/jstoFixed.js\"></script>\r\n<script src=\"js/jsfunction.js\"></script>\r\n<script src=\"js/jsgetValueNotDefine.js\"></script>\r\n<script>\r\n\r\n  var url = window.location.href;\r\n  var pdfStatus = false;\r\n  var Data;\r\n  var PAID = 'N';\r\n  var ATYPE = '1';\r\n  var tr = '';\r\n  var FIRM = getUrlParams(url, \"FIRM\");\r\n  var cno = '';\r\n  var EMP;\r\n  var partyname = getUrlParams(url, \"partyname\");\r\n  var partycode = getUrlParams(url, \"partycode\");\r\n  var ccd = getUrlParams(url, \"ccd\");\r\n  var ccdcode = getUrlParams(url, \"ccdcode\");\r\n  if (ccd == '') {\r\n    ccdcode = '';\r\n  }\r\n  if (partyname == '') {\r\n    partycode = '';\r\n  }\r\n  var broker = getUrlParams(url, \"broker\");\r\n  var CITY = getUrlParams(url, \"city\");\r\n  var haste = getUrlParams(url, \"haste\");\r\n  var fromdate = getUrlParams(url, \"search_FromDate\");\r\n  var todate = getUrlParams(url, \"search_ToDate\");\r\n  var DAYSCONDITION = getUrlParams(url, \"DAYSCONDITION\");\r\n  GRD = getUrlParams(url, \"GRD\");\r\n  var DataCompmst = JSON.parse(localStorage.getItem(\"COMPMST\"));\r\n  var nowDate = new Date();\r\n  if (FIRM != '') {\r\n    for (var i = 0; i < DataCompmst.length; i++) {\r\n      if (DataCompmst[i].FIRM == FIRM) {\r\n        cno = DataCompmst[i].CNO;\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<script>\r\n  document.title = \"COMM. REPORT \" + partyname + \" \" + broker + \" \" + CITY;\r\n  $(document).ready(function () {\r\n    $(\"#loader\").addClass('has-loader');\r\n    load_data();\r\n  });\r\n  function load_data() {\r\n    jsGetObjectByKey(DSN, \"MST\", \"\").then(function (data) {\r\n      masterData = data;\r\n\r\n      jsGetObjectByKey(DSN, \"COMM\", \"\").then(function (data) {\r\n        Data = data;\r\n\r\n        if (ReportATypeCode != \"\" && ReportATypeCode != null && ReportATypeCode != undefined) {\r\n            Data = Data.filter(function (data) {\r\n                return data['ATP'] == ReportATypeCode;\r\n            })\r\n        }\r\n        if (ReportType != '' && ReportType != null && ReportType != undefined && ReportType == \"COMMISSION RECEIVED\") {\r\n            Data = Data.filter(function (data) {\r\n                return data.billDetails.some((billDetails) => billDetails['RDT'] != \"\" && billDetails['RDT'] != null);\r\n            }).map(function (subdata) {\r\n                return {\r\n                    COD: subdata.COD,\r\n                    ATP: subdata.ATP,\r\n                    billDetails: subdata.billDetails.filter(function (billDetails) {\r\n                        return (billDetails['RDT'] != \"\" && billDetails['RDT'] != null);\r\n                    })\r\n                }\r\n            })\r\n        }\r\n\r\n        if (ReportType != '' && ReportType != null && ReportType != undefined && ReportType == \"COMMISSION PENDING\") {\r\n            Data = Data.filter(function (data) {\r\n                return data.billDetails.some((billDetails) => (billDetails['RDT'] == \"\" || billDetails['RDT'] == null) || (billDetails['CPA'] != 0 && billDetails['CPA'] != \"\" && billDetails['CPA'] != null));\r\n            }).map(function (subdata) {\r\n                return {\r\n                    COD: subdata.COD,\r\n                    ATP: subdata.ATP,\r\n                    billDetails: subdata.billDetails.filter(function (billDetails) {\r\n                        return ((billDetails['RDT'] == \"\" || billDetails['RDT'] == null) || (billDetails['CPA'] != 0 && billDetails['CPA'] != \"\" && billDetails['CPA'] != null));\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        if (cno != '' && cno != null) {\r\n            Data = Data.filter(function (data) {\r\n                return data.billDetails.some((billDetails) => billDetails['CNO'] === cno);\r\n            }).map(function (subdata) {\r\n                return {\r\n                    COD: subdata.COD,\r\n                    ATP: subdata.ATP,\r\n                    billDetails: subdata.billDetails.filter(function (billDetails) {\r\n                        return (billDetails['CNO'] === cno);\r\n                    })\r\n                }\r\n            })\r\n        }\r\n\r\n        console.log(Data);\r\n        \r\n        if (ccdcode != '' && ccdcode != null) {\r\n            console.log(ccd, ccdcode);\r\n            Data = Data.filter(function (data) {\r\n                return data['COD'] == ccdcode;\r\n            })\r\n        }\r\n\r\n        console.log(Data);\r\n        if (partyname != '' && partyname != null) {\r\n            console.log(partyname, partycode);\r\n            Data = Data.filter(function (data) {\r\n                return data.billDetails.some((billDetails) => billDetails['ccd'] == partyname);\r\n            }).map(function (subdata) {\r\n                return {\r\n                    COD: subdata.COD,\r\n                    ATP: subdata.ATP,\r\n                    billDetails: subdata.billDetails.filter(function (billDetails) {\r\n                        return (billDetails['ccd'] == partyname);\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        if (fromdate !== '' && fromdate !== null) {\r\n            Data = Data.filter(function (data) {\r\n                return data.billDetails.some((billDetails) => new Date(billDetails.RDT).setHours(0, 0, 0, 0) >= new Date(fromdate).setHours(0, 0, 0, 0));\r\n            }).map(function (subdata) {\r\n                return {\r\n                    COD: subdata.COD,\r\n                    ATP: subdata.ATP,\r\n                    billDetails: subdata.billDetails.filter(function (billDetails) {\r\n                        return new Date(billDetails.RDT).setHours(0, 0, 0, 0) >= new Date(fromdate).setHours(0, 0, 0, 0);\r\n                    })\r\n                }\r\n            })\r\n        }\r\n        if (todate !== '' && todate !== null) {\r\n            Data = Data.filter(function (data) {\r\n                return data.billDetails.some((billDetails) => new Date(billDetails.RDT).setHours(24, 0, 0, 0) <= new Date(todate).setHours(24, 0, 0, 0));\r\n            }).map(function (subdata) {\r\n                return {\r\n                    COD: subdata.COD,\r\n                    ATP: subdata.ATP,\r\n                    billDetails: subdata.billDetails.filter(function (billDetails) {\r\n                        return new Date(billDetails.RDT).setHours(24, 0, 0, 0) <= new Date(todate).setHours(24, 0, 0, 0);\r\n                    })\r\n                }\r\n            })\r\n        }\r\n\r\n\r\n        loadCall(Data);\r\n      });\r\n    })\r\n  }\r\n\r\n\r\n</script>\r\n\r\n<script src=\"js/jsHeaderTbl.js\"></script>"
        }
    ]
}