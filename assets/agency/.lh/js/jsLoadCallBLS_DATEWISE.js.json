{
    "sourceFile": "js/jsLoadCallBLS_DATEWISE.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1638957319895,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1644854279485,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -73,9 +73,9 @@\n                       </tr>\n                       <tr style=\"font-weight:500;font-weight:bold;\"align=\"center\">                    \n                       <td>BILL</td>\n                       <td>PARTY NAME</td>\n-                      <td>DATE</td>\n+                      <td>BILL&nbsp;DATE</td>\n                       <td>SUPPLIER</td>\n                       <td>FINAL AMT</td>\n                       <td>FIRM</td>\n                       <td>TYPE</td>\n"
                }
            ],
            "date": 1638957319895,
            "name": "Commit-0",
            "content": "\n\n//-----------function-------\nfunction getUrlPaymentSlip(CNO, TYPE, VNO, IDE) {\n  return \"paymentSlipPdf.html?ntab=NTAB&IDE=\" + IDE + \"&CNO=\" + CNO + \"&TYPE=\" + TYPE + \"&VNO=\" + VNO;\n}\nvar MainArr = [];\nfunction filterBy(oncode, value) {\n  return MainArr.filter(function (d) {\n    return d[oncode] === value;\n  });\n}\n\nvar GRD;\nfunction loadCall(data) {\n  Data = data;\n  var ccode;\n  var pcode;\n  var city;\n  var broker;\n  var label;\n  var grandtotalNETBILLAMT = 0;\n  var totalNETBILLAMT = 0;\n  var subtotalNETBILLAMT = 0;\n  var BLL;\n  var FdataUrl\n  var DL = Data.length;\n  tr = \"<tbody>\";\n\n  var DtArray = [];\n  for (i = 0; i < Data.length; i++) {\n    if (Data[i].billDetails.length > 0) {\n      for (j = 0; j < Data[i].billDetails.length; j++) {\n        var obj = {};\n        obj.COD = Data[i].COD;\n        obj.ATP = Data[i].ATP;\n        obj.CT = Data[i].CT;\n        obj.CNO = Data[i].billDetails[j].CNO;\n        obj.TYPE = Data[i].billDetails[j].TYPE;\n        obj.VNO = Data[i].billDetails[j].VNO;\n        obj.IDE = Data[i].billDetails[j].IDE;\n        obj.FRM = Data[i].billDetails[j].FRM;\n        obj.ccd = Data[i].billDetails[j].ccd;\n        obj.BLL = Data[i].billDetails[j].BLL;\n        obj.DTE = Data[i].billDetails[j].DTE;\n        obj.TRN = Data[i].billDetails[j].TRN;\n        obj.RNO = Data[i].billDetails[j].RNO;\n        obj.DT = Data[i].billDetails[j].DT;\n        obj.PD = Data[i].billDetails[j].PD;\n        obj.SG = Data[i].billDetails[j].SG;\n        obj.FAMT = Data[i].billDetails[j].FAMT;\n        obj.SRS = Data[i].billDetails[j].SRS;\n\n        MainArr.push(obj);\n        if (DtArray.indexOf(Data[i].billDetails[j].DTE) < 0) {\n          DtArray.push(Data[i].billDetails[j].DTE);\n        }\n      }\n    }\n  }\n\n  // console.log(DtArray);\n  Data = DtArray;\n  Data = Data.sort(function (a, b) {\n    return new Date(b) - new Date(a);\n  });\n  // console.log(MainArr);\n  if (DL > 0) {\n    grandtotalNETBILLAMT = 0;\n    for (o = Data.length - 1; o >= 0; o--) {\n      tr += `<tr class=\"trPartyHead\">\n                            <th colspan=\"14\" class=\"trPartyHead\" >` + formatDate(Data[o]) + `</th>                                    \n                      </tr>\n                      <tr style=\"font-weight:500;font-weight:bold;\"align=\"center\">                    \n                      <td>BILL</td>\n                      <td>PARTY NAME</td>\n                      <td>DATE</td>\n                      <td>SUPPLIER</td>\n                      <td>FINAL AMT</td>\n                      <td>FIRM</td>\n                      <td>TYPE</td>\n                      <td>PAID</td>\n                      <td class=\"TRNSPT\">TRANSPORT</td>\n                      <td class=\"TRNSPT\">LR NO</td>\n                      <td>GROUP</td>\n                      </tr>\n                      `;\n\n      var Subarray = filterBy(\"DTE\", Data[o]);\n      SubarrayBLL = Subarray.length;\n      if (SubarrayBLL > 0) {\n        for (j = 0; j < SubarrayBLL; j++) {\n          ccode = getPartyDetailsBySendCode(Subarray[j].COD);\n          if (ccode.length > 0) {\n            pcode = getValueNotDefine(ccode[0].partyname);\n            city = getValueNotDefine(ccode[0].city);\n            broker = getValueNotDefine(ccode[0].broker);\n            label = getValueNotDefine(ccode[0].label);\n            MO = getValueNotDefine(ccode[0].MO);\n          }\n          var transport = (Subarray[j].TR);\n          var UrlPaymentSlip = getUrlPaymentSlip(Subarray[j].CNO, (Subarray[j].TYPE).replace(\"ZS\", \"\"), Subarray[j].VNO, (Subarray[j].IDE).replace(\"ZS\", \"\"));\n          FdataUrl = getFullDataLinkByCnoTypeVnoFirm(Subarray[j].CNO, Subarray[j].TYPE, Subarray[j].VNO, getFirmDetailsBySendCode(Subarray[j].CNO)[0].FIRM, Subarray[j].IDE);\n\n          var FAMT = 0;\n          if (Subarray[j].DT != null && Subarray[j].DT != \"\") {\n            if (Subarray[j].DT.toUpperCase().indexOf('CN')) {\n              FAMT = +Math.abs(Subarray[j].FAMT);\n            } else if (Subarray[j].DT.toUpperCase().indexOf('DN')) {\n              FAMT = -Math.abs(Subarray[j].FAMT);\n            } else if (Subarray[j].DT.toUpperCase().indexOf('OS')) {\n              FAMT = -Math.abs(Subarray[j].FAMT);\n            } else {\n              FAMT = -Math.abs(Subarray[j].FAMT);\n            }\n          } else {\n            FAMT = -Math.abs(Subarray[j].FAMT);\n          }\n          var supGrpName = Subarray[j].SG;\n          tr += ` \n          <tr align=\"center\"class=\"hideAbleTr\">\n          <td><a href=\"`+ FdataUrl + `\" target=\"_blank\"><button  class=\"PrintBtnHide\">` + Subarray[j].BLL + `</button></a></td>\n          <td onclick=\"openSubR('`+ Subarray[j].COD + `')\">` + pcode + `</td>\n          <td onclick=\"openSubR('`+ Subarray[j].COD + `')\">` + formatDate(Subarray[j].DTE) + `</td>\n          <td class=\"TRNSPT\"onclick=\"openSubR('`+ Subarray[j].COD + `','` + Subarray[j].ccd + `')\">` + getValueNotDefine(Subarray[j].ccd) + `</td>\n          <td onclick=\"openSubR('`+ Subarray[j].COD + `')\">` + valuetoFixed(FAMT) + `</td>\n          <td onclick=\"openSubR('`+ Subarray[j].COD + `')\">` + Subarray[j].FRM + `</td>\n          <td onclick=\"openSubR('`+ Subarray[j].COD + `')\">` + Subarray[j].SRS + `</td>\n          <td onclick=\"openSubR('`+ Subarray[j].COD + `')\">` + Subarray[j].PD + `</td>\n          <td class=\"TRNSPT\"onclick=\"openSubR('`+ Subarray[j].COD + `')\">` + getValueNotDefine(Subarray[j].TRN) + `</td>\n          <td class=\"TRNSPT\"onclick=\"openSubR('`+ Subarray[j].COD + `')\">` + getValueNotDefine(Subarray[j].RNO) + `</td>\n          <td onclick=\"openSubR('`+ Subarray[j].COD + `')\">` + getValueNotDefine(supGrpName) + `</td>\n          </tr>`;\n\n          totalNETBILLAMT += FAMT;\n        }\n      }\n      tr += `<tr class=\"tfootcard\"style=\"background-color:#3e3b3b26;\">\n      <td  colspan=\"4\">TOTAL </td>\n      <td>` + valuetoFixed(totalNETBILLAMT) + `</td>\n      <td colspan=\"6\"></td>\n      </tr>`;\n      grandtotalNETBILLAMT += totalNETBILLAMT;\n      totalNETBILLAMT = 0;\n    }\n    tr += `<tr class=\"tfootcard\"style=\"background-color:#3e3b3b26;\">\n    <td  colspan=\"4\">GRAND TOTAL </td>\n    <td>` + valuetoFixed(grandtotalNETBILLAMT) + `</td>\n    <td colspan=\"6\"></td>\n    </tr>`;\n    $('#result').html(tr);\n    $(\"#loader\").removeClass('has-loader');\n\n    var hideAbleTr = getUrlParams(url, \"hideAbleTr\");\n    if (hideAbleTr == \"true\") {\n      $('.hideAbleTr').css(\"display\", \"none\");\n      $('.unhideAbleTr').css(\"display\", \"\");\n    } else {\n      $('.unhideAbleTr').css(\"display\", \"none\");\n    }\n\n    AddHeaderTbl();\n  } else {\n    $('#result').html('<h1>No Data Found</h1>');\n    $(\"#loader\").removeClass('has-loader');\n\n  }\n\n  try {\n\n  } catch (e) {\n\n    $('#result').html(tr);\n    $(\"#loader\").removeClass('has-loader');\n  }\n}\nvar my_awesome_script = document.createElement('script');\nmy_awesome_script.setAttribute('src', 'js/jsPopUpModelParty.js');\ndocument.head.appendChild(my_awesome_script);\n\n"
        }
    ]
}