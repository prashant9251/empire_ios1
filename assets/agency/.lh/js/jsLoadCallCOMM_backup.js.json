{
    "sourceFile": "js/jsLoadCallCOMM_backup.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1654959062585,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1654959062585,
            "name": "Commit-0",
            "content": "\r\nvar ReportType = getUrlParams(url, \"ReportType\");\r\nvar ReportSeriesTypeCode = getUrlParams(url, \"ReportSeriesTypeCode\");\r\nvar ReportATypeCode = getUrlParams(url, \"ReportATypeCode\");\r\nvar ReportDOC_TYPECode = getUrlParams(url, \"ReportDOC_TYPECode\");\r\n\r\nvar GRD;\r\nfunction loadCall(data) {\r\n\r\n    try {\r\n\r\n        Data = data;\r\n\r\n        var ccode;\r\n        var pcode;\r\n        var city;\r\n        var broker;\r\n        var label;\r\n        var grandtotalCMA = 0;\r\n        var grandtotalCSA = 0;\r\n        var grandtotalCQA = 0;\r\n        var grandtotalTDA = 0;\r\n        var grandtotalDFA = 0;\r\n        var grandtotalLDA = 0;\r\n        var grandtotalCPA = 0;\r\n        var totalCMA = 0;\r\n        var totalCSA = 0;\r\n        var totalCQA = 0;\r\n        var totalTDA = 0;\r\n        var totalDFA = 0;\r\n        var totalLDA = 0;\r\n        var totalCPA = 0;\r\n        var subtotalCMA = 0;\r\n        var subtotalCSA = 0;\r\n        var subtotalCQA = 0;\r\n        var subtotalTDA = 0;\r\n        var subtotalDFA = 0;\r\n        var subtotalLDA = 0;\r\n        var subtotalCPA = 0;\r\n        var BLL;\r\n        var FdataUrl\r\n        var DL = Data.length;\r\n        console.log(Data.length);\r\n        if (DL > 0) {\r\n            grandtotalCMA = 0;\r\n            grandtotalCSA = 0;\r\n            grandtotalCQA = 0;\r\n            grandtotalTDA = 0;\r\n            grandtotalDFA = 0;\r\n            grandtotalLDA = 0;\r\n            grandtotalCPA = 0;\r\n            tr = \"<tbody>\";\r\n\r\n            for (var i = 0; i < DL; i++) {\r\n                ccode = getPartyDetailsBySendCode(Data[i].COD);\r\n                lbl = \"\";\r\n                if (ccode.length > 0) {\r\n                    pcode = getValueNotDefine(ccode[0].partyname);\r\n                    city = getValueNotDefine(ccode[0].city);\r\n                    broker = getValueNotDefine(ccode[0].broker);\r\n                    label = getValueNotDefine(ccode[0].label);\r\n                    MO = getValueNotDefine(ccode[0].MO);\r\n                    ATYPE = getValueNotDefine(ccode[0].ATYPE);\r\n                    lbl = parseInt(ATYPE) == 1 ? \"CUST : \" : parseInt(ATYPE) == 2 ? \"SUPP : \" : \"\";\r\n\r\n                }\r\n                tr += `<tr class=\"trPartyHead\"onclick=\"trOnClick('` + Data[i].COD + `','` + city + `','` + broker + `');\">\r\n                          <th colspan=\"17\" class=\"trPartyHead\">` + lbl + label + `<a href=\"tel:` + MO + `\"><button>MO:` + getValueNotDefine(MO) + `</button></a></th>\r\n                        </tr>\r\n                        `;\r\n\r\n                BLL = Data[i].billDetails.length;\r\n                if (BLL > 0) {\r\n                    totalCMA = 0;\r\n                    totalCSA = 0;\r\n                    totalCQA = 0;\r\n                    totalTDA = 0;\r\n                    totalDFA = 0;\r\n                    totalLDA = 0;\r\n                    totalCPA = 0;\r\n                    var codex = null;\r\n                    var CodePrev = null;\r\n\r\n                    var IDE_prev = 0;\r\n                    for (j = 0; j < BLL; j++) {\r\n                        var sr = 0\r\n                        codex = Data[i].billDetails[j].ccd;\r\n                        if (j == 0 && codex != CodePrev) {\r\n                            tr += ` <tr style=\"font-weight:500;font-weight:bold;\"align=\"center\">                    \r\n            <td class=\"hidePWBILL\">BILL</td>\r\n            <td class=\"hidePWCHQDATE\">CHQ REC&nbsp; DATE</td>\r\n            <td class=\"hidePWCUST\">CUST.</td>\r\n            <td class=\"hidePWFIRM\">FIRM</td>\r\n            <td class=\"hidePWRECDATE\">REC.&nbsp;DATE</td>\r\n            <td class=\"hidePWVNO\">VNO</td>\r\n            <td class=\"hidePWAMT\">AMT</td>\r\n            <td class=\"hidePWCOMAMT\">COM.<BR>AMT</td>\r\n            <td class=\"hidePWCASHAMT\">CASH<BR>AMT</td>\r\n            <td class=\"hidePWCHQAMT\">CHQ<BR>AMT</td>\r\n            <td class=\"hidePWTDSAMT\">TDS<BR>AMT</td>\r\n            <td class=\"hidePWDIFFAMT\">DIFF.<BR>AMT</td>\r\n            <td class=\"hidePWCHQNO\">CHQ<BR>NO</td>\r\n            <td class=\"hidePWCOM.PENDAMT\">COM.PEND<BR>AMT</td>\r\n            </tr>  `;\r\n                            CodePrev = codex;\r\n                        }\r\n\r\n                        if (j != 0 && codex != CodePrev) {\r\n\r\n                            tr += `  \r\n                        <tr class=\"hidePWSubTotal tfootcard\"style=\"background-color:#3e3b3b26;color:#c107a2;text-align: center;\">\r\n                        <td class=\"hidePWBILL hideAbleTr\">SUBTOTAL</td>\r\n                        <td class=\"hidePWCHQDATE\"></td>\r\n                        <td class=\"hidePWCUST\"></td>\r\n                        <td class=\"hidePWFIRM\"></td>\r\n                        <td class=\"hidePWRECDATE\"></td>\r\n                        <td class=\"hidePWVNO\"></td>\r\n                        <td class=\"hidePWAMT\"></td>\r\n                        <td class=\"unhideAbleTr\" colspan=\"8\"onclick=\"openSubR('`+ Data[i].COD + `','` + Data[i].billDetails[j - 1].ccd + `')\">` + Data[i].billDetails[j - 1].ccd + `</td>\r\n                        <td class=\"hidePWCOMAMT\">`+ subtotalCMA + `</td>                        \r\n                        <td class=\"hidePWCASHAMT\"></td>\r\n                        <td class=\"hidePWCHQAMT\"></td>\r\n                        <td class=\"hidePWTDSAMT\"></td>\r\n                        <td class=\"hidePWDIFFAMT\"></td>\r\n                        <td class=\"hidePWCHQNO\"></td>\r\n                        <td class=\"hidePWCOM.PENDAMT\">`+ subtotalCPA + `</td>\r\n                        </tr>  `;\r\n\r\n\r\n                            totalCMA += subtotalCMA;\r\n                            // totalCSA += subtotalCSA;\r\n                            // totalCQA += subtotalCQA;\r\n                            // totalTDA += subtotalTDA;\r\n                            // totalDFA += subtotalDFA;\r\n                            // totalLDA += subtotalLDA;\r\n                            totalCPA += subtotalCPA;\r\n                            subtotalCMA = 0;\r\n                            // subtotalCSA = 0;\r\n                            // subtotalCQA = 0;\r\n                            // subtotalTDA = 0;\r\n                            // subtotalDFA = 0;\r\n                            // subtotalLDA = 0;\r\n                            subtotalCPA = 0;\r\n                            CodePrev = codex;\r\n\r\n                        }\r\n\r\n                        var BCD = (Data[i].billDetails[j].BCD);\r\n\r\n                        FdataUrl = getFullDataLinkByCnoTypeVnoFirm(Data[i].billDetails[j].CNO, Data[i].billDetails[j].TYPE, Data[i].billDetails[j].VNO, getFirmDetailsBySendCode(Data[i].billDetails[j].CNO)[0].FIRM, Data[i].billDetails[j].IDE);\r\n                        var urlopen = '';\r\n                        var TYPEforLink = (Data[i].billDetails[j].TYPE).toUpperCase();\r\n                        if (TYPEforLink.indexOf('B') > -1) {\r\n\r\n                        } else if (TYPEforLink.indexOf('S') > -1 || TYPEforLink.indexOf('P') > -1) {\r\n                            urlopen = FdataUrl;\r\n                        }\r\n\r\n                        var CMA = 0;\r\n                        var CSA = 0;\r\n                        var CQA = 0;\r\n                        var TDA = 0;\r\n                        var DFA = 0;\r\n                        var LDA = 0;\r\n                        var CPA = 0;\r\n                        IDE = Data[i].billDetails[j].IDE;\r\n                        var VNO = '';\r\n                        var CCD = '';\r\n                        var CDT = '';\r\n                        var billbutton=\"\";\r\n                        if (IDE !== IDE_prev) {\r\n                            CMA = parseFloat((Data[i].billDetails[j].CMA == null) ? 0 : Data[i].billDetails[j].CMA);\r\n                            CPA = parseFloat((Data[i].billDetails[j].CPA == null) ? 0 : Data[i].billDetails[j].CPA);\r\n                            CCD = (Data[i].billDetails[j].ccd);\r\n                            CSA = parseFloat(Data[i].billDetails[j].CSA == null || Data[i].billDetails[j].CSA == '' ? 0 : Data[i].billDetails[j].CSA);\r\n                            CQA = parseFloat(Data[i].billDetails[j].CQA == null || Data[i].billDetails[j].CQA == '' ? 0 : Data[i].billDetails[j].CQA);\r\n                            TDA = parseFloat(Data[i].billDetails[j].TDA == null || Data[i].billDetails[j].TDA == '' ? 0 : Data[i].billDetails[j].TDA);\r\n                            DFA = parseFloat(Data[i].billDetails[j].DFA == null || Data[i].billDetails[j].DFA == '' ? 0 : Data[i].billDetails[j].DFA);\r\n                            LDA = parseFloat(Data[i].billDetails[j].LDA == null || Data[i].billDetails[j].LDA == '' ? 0 : Data[i].billDetails[j].LDA);\r\n                            CDT = formatDate(Data[i].billDetails[j].CDT);\r\n                            VNO = Data[i].billDetails[j].VNO;\r\n                            IDE_prev = IDE;\r\n                            FdataUrl = getFullDataLinkByCnoTypeVnoFirm(Data[i].billDetails[j].CNO, Data[i].billDetails[j].TYPE, Data[i].billDetails[j].VNO, getFirmDetailsBySendCode(Data[i].billDetails[j].CNO)[0].FIRM, Data[i].billDetails[j].IDE);\r\n                            var paymentSlipPdf = FdataUrl.replace(\"Billpdf\", \"paymentSlip\");\r\n                            billbutton = `<a target=\"_blank\" href=\"` + paymentSlipPdf + `\"><button class=\"PrintBtnHide\">` + (Data[i].billDetails[j].BLL) + `</button></a>`;\r\n\r\n                        } else {\r\n                           \r\n                        }\r\n                        subtotalCMA += (CMA);\r\n                        subtotalCPA += (CPA);\r\n                        tr += ` \r\n                              \r\n                                <tr class=\"hideAbleTr\"align=\"center\"style=\"\">\r\n                                <td  class=\"hidePWBILL\">` + billbutton + `</td>\r\n                                <td  class=\"hidePWCHQDATE\" onclick=\"openSubR('`+ Data[i].COD + `')\">` + CDT + `</td>\r\n                                <td  class=\"hidePWCUST\" onclick=\"openSubR('`+ Data[i].COD + `','` + Data[i].billDetails[j].ccd + `')\">` + CCD + `</td>\r\n                                <td  class=\"hidePWFIRM\" onclick=\"openSubR('`+ Data[i].COD + `')\">` + (Data[i].billDetails[j].FRM) + `</td>\r\n                                <td  class=\"hidePWRECDATE\" onclick=\"openSubR('`+ Data[i].COD + `')\">` + formatDate(Data[i].billDetails[j].RDT) + `</td>\r\n                                <td  class=\"hidePWVNO\" onclick=\"openSubR('`+ Data[i].COD + `')\">` + (VNO) + `</td>\r\n                                <td  class=\"hidePWAMT\" onclick=\"openSubR('`+ Data[i].COD + `')\">` + (Data[i].billDetails[j].PDA) + `</td>\r\n                                <td  class=\"hidePWCOMAMT\" onclick=\"openSubR('`+ Data[i].COD + `')\">` + (CMA) + `</td>\r\n                                <td  class=\"hidePWCASHAMT\" onclick=\"openSubR('`+ Data[i].COD + `')\">` + (CSA) + `</td>\r\n                                <td  class=\"hidePWCHQAMT\" onclick=\"openSubR('`+ Data[i].COD + `')\">` + (CQA) + `</td>\r\n                                <td  class=\"hidePWTDSAMT\" onclick=\"openSubR('`+ Data[i].COD + `')\">` + (TDA) + `</td>\r\n                                <td  class=\"hidePWDIFFAMT\" onclick=\"openSubR('`+ Data[i].COD + `')\">` + (DFA) + `</td>\r\n                                <td  class=\"hidePWCHQNO\" onclick=\"openSubR('`+ Data[i].COD + `')\">` + (Data[i].billDetails[j].CQN) + `</td>\r\n                                <td  class=\"hidePWCOM.PENDAMT\" onclick=\"openSubR('`+ Data[i].COD + `')\">` + (CPA) + `</td>                                    \r\n                                </tr>`;\r\n\r\n\r\n                        if (j == BLL - 1) {\r\n\r\n                            tr += `  \r\n            <tr class=\"hidePWSubTotal tfootcard\"style=\"background-color:#3e3b3b26;color:#c107a2;text-align: center;\">\r\n            <td  class=\"hidePWBILL hideAbleTr\" >SUBTOTAL</td>\r\n            <td  class=\"hidePWCHQDATE\"></td>\r\n            <td  class=\"hidePWCUST\"></td>\r\n            <td  class=\"hidePWFIRM\"></td>\r\n            <td  class=\"hidePWRECDATE\"></td>\r\n            <td  class=\"hidePWVNO\"></td>\r\n            <td  class=\"hidePWAMT\"></td>\r\n            <td class=\"unhideAbleTr\" colspan=\"8\"onclick=\"openSubR('`+ Data[i].COD + `','` + Data[i].billDetails[j].ccd + `')\">` + Data[i].billDetails[j].ccd + `</td>\r\n            <td  class=\"hidePWCOMAMT\">`+ subtotalCMA + `</td>            \r\n            <td  class=\"hidePWCASHAMT\"></td>\r\n            <td  class=\"hidePWCHQAMT\"></td>\r\n            <td  class=\"hidePWTDSAMT\"></td>\r\n            <td  class=\"hidePWDIFFAMT\"></td>\r\n            <td  class=\"hidePWCHQNO\"></td>\r\n            <td  class=\"hidePWCOM.PENDAMT\">`+ subtotalCPA + `</td>\r\n            </tr>  `;\r\n\r\n\r\n                            totalCMA += subtotalCMA;\r\n                            // totalCSA += subtotalCSA;\r\n                            // totalCQA += subtotalCQA;\r\n                            // totalTDA += subtotalTDA;\r\n                            // totalDFA += subtotalDFA;\r\n                            // totalLDA += subtotalLDA;\r\n                            totalCPA += subtotalCPA;\r\n                            subtotalCMA = 0;\r\n                            // subtotalCSA = 0;\r\n                            // subtotalCQA = 0;\r\n                            // subtotalTDA = 0;\r\n                            // subtotalDFA = 0;\r\n                            // subtotalLDA = 0;\r\n                            subtotalCPA = 0;\r\n\r\n                        }\r\n                    }\r\n\r\n                    grandtotalCMA += totalCMA;\r\n                    // grandtotalCSA += totalCSA;\r\n                    // grandtotalCQA += totalCQA;\r\n                    // grandtotalTDA += totalTDA;\r\n                    // grandtotalDFA += totalDFA;\r\n                    // grandtotalLDA += totalLDA;\r\n                    grandtotalCPA += totalCPA;\r\n                    tr += `<tr class=\"tfootcard\"style=\"background-color:#3e3b3b26;\">\r\n                <td  class=\"hidePWBILL\">TOTAL </td>\r\n                <td  class=\"hidePWCHQDATE\"></td>\r\n                <td  class=\"hidePWCUST\"></td>\r\n                <td  class=\"hidePWFIRM\"></td>\r\n                <td  class=\"hidePWRECDATE\"></td>\r\n                <td  class=\"hidePWVNO\"></td>\r\n                <td  class=\"hidePWAMT\"></td>\r\n                <td class=\"hidePWCOMAMT\">`+ totalCMA + `</td>\r\n                <td class=\"hidePWCASHAMT\"></td>\r\n                <td class=\"hidePWCHQAMT\"></td>\r\n                <td class=\"hidePWTDSAMT\"></td>\r\n                <td class=\"hidePWDIFFAMT\"></td>\r\n                <td class=\"hidePWCHQNO\"></td>\r\n                <td class=\"hidePWCOM.PENDAMT\">`+ totalCPA + `</td>\r\n                </tr>`;\r\n                    totalCMA = 0;\r\n                    totalCPA = 0;\r\n                }\r\n\r\n            }\r\n            tr += `<tr class=\"tfootcard\"style=\"background-color:#3e3b3b26;color:#080844;\">\r\n    <td  class=\"hidePWBILL\">GRAND TOTAL</td>\r\n    <td  class=\"hidePWCHQDATE\"></td>\r\n    <td  class=\"hidePWCUST\"></td>\r\n    <td  class=\"hidePWFIRM\"></td>\r\n    <td  class=\"hidePWRECDATE\"></td>\r\n    <td  class=\"hidePWVNO\"></td>\r\n    <td  class=\"hidePWAMT\"></td>\r\n    <td class=\"hidePWCOMAMT\">`+ grandtotalCMA + `</td>\r\n    <td class=\"hidePWCASHAMT\"></td>\r\n    <td class=\"hidePWCHQAMT\"></td>\r\n    <td class=\"hidePWTDSAMT\"></td>\r\n    <td class=\"hidePWDIFFAMT\"></td>\r\n    <td class=\"hidePWCHQNO\"></td>\r\n    <td class=\"hidePWCOM.PENDAMT\">`+ grandtotalCPA + `</td>\r\n    </tr>`;\r\n\r\n            $('#result').html(tr);\r\n            $(\"#loader\").removeClass('has-loader');\r\n\r\n            var hideAbleTr = getUrlParams(url, \"hideAbleTr\");\r\n            if (hideAbleTr == \"true\") {\r\n                $('.hideAbleTr').css(\"display\", \"none\");\r\n                $('.unhideAbleTr').css(\"display\", \"\");\r\n            } else {\r\n                $('.unhideAbleTr').css(\"display\", \"none\");\r\n            }\r\n\r\n            AddHeaderTbl();\r\n\r\n        } else {\r\n            $('#result').html('<h1>No Data Found</h1>');\r\n            $(\"#loader\").removeClass('has-loader');\r\n\r\n        }\r\n\r\n\r\n    } catch (e) {\r\n        var shareText = \"Error in : \" + e;\r\n        $('#result').html(`<h5>error:` + e + `<br> please send this error screen shot to whatsApp No. <a href=\"https://wa.me/918469190530?text=` + encodeURIComponent(shareText) + `\">8469190530</a></h5>`);\r\n        $(\"#loader\").removeClass('has-loader');\r\n\r\n    }\r\n}\r\nvar my_awesome_script = document.createElement('script');\r\nmy_awesome_script.setAttribute('src', 'js/jsPopUpModelParty.js');\r\ndocument.head.appendChild(my_awesome_script);\r\n"
        }
    ]
}