{
    "sourceFile": "js/jsLoadCallLEDGER.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1634888110199,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1634888236766,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -88,9 +88,9 @@\n       if ((Data[i].TYPE).toUpperCase().indexOf('B') > -1 || (Data[i].TYPE).toUpperCase().indexOf('C') > -1 || (Data[i].TYPE).toUpperCase().indexOf('00') > -1) {\n         if ((Data[i].TYPE).toUpperCase().indexOf('00') > -1) {\n           billbutton = '';\n         } else {\n-          billbutton = '';\n+          billbutton = `<a target=\"_blank\" href=\"` + FdataUrl + `\"><button class=\"PrintBtnHide\">` + DCNO + `</button></a>`;\n           // billbutton = `<a target=\"_blank\" href=\"` + paymentSlipUrl + `\"><button>` + DCNO + `</button></a>`;\n         }\n \n       } else {\n"
                },
                {
                    "date": 1634888866059,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -82,14 +82,14 @@\n         if (DCNO == '' || DCNO == null) {\n           DCNO = \"OPEN\";\n         }\n       }\n-      var paymentSlipUrl = getUrlPaymentSlip(Data[i].CNO, Data[i].TYPE, Data[i].VNO, Data[i].IDE);\n       FdataUrl = getFullDataLinkByCnoTypeVnoFirm(Data[i].CNO, Data[i].TYPE, Data[i].VNO, getFirmDetailsBySendCode(Data[i].CNO)[0].FIRM, Data[i].IDE);\n       if ((Data[i].TYPE).toUpperCase().indexOf('B') > -1 || (Data[i].TYPE).toUpperCase().indexOf('C') > -1 || (Data[i].TYPE).toUpperCase().indexOf('00') > -1) {\n         if ((Data[i].TYPE).toUpperCase().indexOf('00') > -1) {\n           billbutton = '';\n         } else {\n+          var paymentSlipPdf\n           billbutton = `<a target=\"_blank\" href=\"` + FdataUrl + `\"><button class=\"PrintBtnHide\">` + DCNO + `</button></a>`;\n           // billbutton = `<a target=\"_blank\" href=\"` + paymentSlipUrl + `\"><button>` + DCNO + `</button></a>`;\n         }\n \n"
                },
                {
                    "date": 1634888903301,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,10 +87,10 @@\n       if ((Data[i].TYPE).toUpperCase().indexOf('B') > -1 || (Data[i].TYPE).toUpperCase().indexOf('C') > -1 || (Data[i].TYPE).toUpperCase().indexOf('00') > -1) {\n         if ((Data[i].TYPE).toUpperCase().indexOf('00') > -1) {\n           billbutton = '';\n         } else {\n-          var paymentSlipPdf\n-          billbutton = `<a target=\"_blank\" href=\"` + FdataUrl + `\"><button class=\"PrintBtnHide\">` + DCNO + `</button></a>`;\n+          var paymentSlipPdf=FdataUrl.replace(\"BillPdf\",\"paymentSlip\");\n+          billbutton = `<a target=\"_blank\" href=\"` + paymentSlipPdf + `\"><button class=\"PrintBtnHide\">` + DCNO + `</button></a>`;\n           // billbutton = `<a target=\"_blank\" href=\"` + paymentSlipUrl + `\"><button>` + DCNO + `</button></a>`;\n         }\n \n       } else {\n"
                },
                {
                    "date": 1634888919729,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -87,9 +87,9 @@\n       if ((Data[i].TYPE).toUpperCase().indexOf('B') > -1 || (Data[i].TYPE).toUpperCase().indexOf('C') > -1 || (Data[i].TYPE).toUpperCase().indexOf('00') > -1) {\n         if ((Data[i].TYPE).toUpperCase().indexOf('00') > -1) {\n           billbutton = '';\n         } else {\n-          var paymentSlipPdf=FdataUrl.replace(\"BillPdf\",\"paymentSlip\");\n+          var paymentSlipPdf=FdataUrl.replace(\"Billpdf\",\"paymentSlip\");\n           billbutton = `<a target=\"_blank\" href=\"` + paymentSlipPdf + `\"><button class=\"PrintBtnHide\">` + DCNO + `</button></a>`;\n           // billbutton = `<a target=\"_blank\" href=\"` + paymentSlipUrl + `\"><button>` + DCNO + `</button></a>`;\n         }\n \n"
                },
                {
                    "date": 1644854294066,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -61,9 +61,9 @@\n                         <th colspan=\"9\" class=\"trPartyHead\">` + lbl + label + `</th> \n                         </tr>\n                     \n                         <tr>\n-                        <td>DATE</td>\n+                        <td>DATE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>\n                         <td>BILL/CHQ</td>\n                         <td>REFERENCE A/C</td>\n                         <td class=\"DEBIT\">DEBIT</td>\n                         <td class=\"CREDIT\">CREDIT</td>\n"
                }
            ],
            "date": 1634888110199,
            "name": "Commit-0",
            "content": "\nfunction getUrlPaymentSlip(CNO, TYPE, VNO, IDE) {\n  return \"paymentSlipPdf.html?ntab=NTAB&IDE=\" + IDE + \"&CNO=\" + CNO + \"&TYPE=\" + TYPE + \"&VNO=\" + VNO;\n}\n\nfunction loadCall(data) {\n  var Data = data;\n\n  if (cno != '' && cno != null) {\n    Data = Data.filter(function (data) {\n      return data.CNO == cno;\n    })\n  }\n  if (partycode != '' && partycode != null) {\n    Data = Data.filter(function (data) {\n      return data.COD == partycode;\n    })\n  }\n\n  console.log(Data);\n  if (ccdcode != '' && ccdcode != null) {\n    Data = Data.filter(function (data) {\n      return data.RFCD == ccdcode;\n    })\n  }\n\n  if (todate != '' && todate != null) {\n    Data = Data.filter(function (data) {\n      return new Date(data.DT).setHours(24, 0, 0, 0) <= new Date(todate).setHours(24, 0, 0, 0);\n    })\n  }\n  if (CrDrEntryType == \"CREDIT\") {\n    Data = Data.filter(function (data) {\n      return data.DRA != 0;\n    })\n  }\n  if (CrDrEntryType == \"DEBIT\") {\n    Data = Data.filter(function (data) {\n      return data.CRA != 0;\n    })\n  }\n  Data = Data.sort((a, b) => new Date(a.DT) - new Date(b.DT));\nconsole.log(Data);\n\n  if (Data.length > 0) {\n    var BALANCE = 0;\n    var DEBIT = 0;\n    var CREDIT = 0;\n    ccode = getPartyDetailsBySendCode(Data[0].COD);\n    if (ccode.length > 0) {\n      pcode = getValueNotDefine(ccode[0].partyname);\n      city = getValueNotDefine(ccode[0].city);\n      broker = getValueNotDefine(ccode[0].broker);\n      label = getValueNotDefine(ccode[0].label);\n      MO = getValueNotDefine(ccode[0].MO);\n      ATYPE = getValueNotDefine(ccode[0].ATYPE);\n      lbl = parseInt(ATYPE) == 1 ? \"CUST : \" : parseInt(ATYPE) == 2 ? \"SUPP : \" : \"\";\n\n    }\n    tr += `<tr class=\"trPartyHead\" style=\"height:40px\" onclick=\"trOnClick('` + Data[0].COD + `','','','` + ATYPE + `','` + lbl + `');\">  \n                        <th colspan=\"9\" class=\"trPartyHead\">` + lbl + label + `</th> \n                        </tr>\n                    \n                        <tr>\n                        <td>DATE</td>\n                        <td>BILL/CHQ</td>\n                        <td>REFERENCE A/C</td>\n                        <td class=\"DEBIT\">DEBIT</td>\n                        <td class=\"CREDIT\">CREDIT</td>\n                        <td class=\"BALANCE\">BALANCE</td>\n                        <td>VNO</td>\n                        <td> RMK</td>\n                        </tr>                        \n                                `;\n    for (var i = 0; i < Data.length; i++) {\n      DEBIT += parseFloat(Data[i].DRA);\n      CREDIT += parseFloat(Data[i].CRA);\n      BALANCE += parseFloat(Data[i].DRA) - parseFloat(Data[i].CRA)\n      var DCNO = getValueNotDefine(Data[i].DCNO);\n      if (DCNO == '' || DCNO == null) {\n        DCNO = getValueNotDefine(Data[i].BLNO);\n        if (DCNO == '' || DCNO == null) {\n          DCNO = \"OPEN\";\n        }\n      }\n      var paymentSlipUrl = getUrlPaymentSlip(Data[i].CNO, Data[i].TYPE, Data[i].VNO, Data[i].IDE);\n      FdataUrl = getFullDataLinkByCnoTypeVnoFirm(Data[i].CNO, Data[i].TYPE, Data[i].VNO, getFirmDetailsBySendCode(Data[i].CNO)[0].FIRM, Data[i].IDE);\n      if ((Data[i].TYPE).toUpperCase().indexOf('B') > -1 || (Data[i].TYPE).toUpperCase().indexOf('C') > -1 || (Data[i].TYPE).toUpperCase().indexOf('00') > -1) {\n        if ((Data[i].TYPE).toUpperCase().indexOf('00') > -1) {\n          billbutton = '';\n        } else {\n          billbutton = '';\n          // billbutton = `<a target=\"_blank\" href=\"` + paymentSlipUrl + `\"><button>` + DCNO + `</button></a>`;\n        }\n\n      } else {\n        billbutton = `<a target=\"_blank\" href=\"` + FdataUrl + `\"><button class=\"PrintBtnHide\">` + DCNO + `</button></a>`;\n      }\n      RFCD = Data[i].RFCD;\n      var RFCDArr = getPartyDetailsBySendCode(RFCD);\n      if (RFCDArr.length > 0) {\n        RFCD = RFCDArr[0].partyname;\n      }\n\n      if (new Date(fromdate).setHours(0, 0, 0, 0) <= new Date(Data[i].DT).setHours(0, 0, 0, 0)) {\n        tr += ` <tr>\n        <th>`+ formatDate(Data[i].DT) + `</th>\n        <td>`+ billbutton + `</td>\n        <td onclick=\"openSubR('`+ Data[i].COD + `','` + RFCD + `')\">` + RFCD + `</td>\n        <td class=\"DEBIT\">`+ valuetoFixed(Data[i].DRA) + `</td>\n        <td class=\"CREDIT\">`+ valuetoFixed(Data[i].CRA) + `</td>\n        <td class=\"BALANCE\">`+ CrDrTagforValue(valuetoFixed(BALANCE)) + `</td>\n        <td>`+ Data[i].VNO + `</td>\n        <td> `+ getValueNotDefine(Data[i].RMK) + `</td>\n        </tr>\n        `;\n      }\n\n    }\n    tr += `     <tr class=\"tfootcard\">\n    <td colspan=\"3\">GRAND TOTAL</td>\n    <td class=\"DEBIT\">`+ valuetoFixed(DEBIT) + `</td>\n    <td class=\"CREDIT\">`+ valuetoFixed(CREDIT) + `</td>\n    <td class=\"BALANCE\">`+ CrDrTagforValue(valuetoFixed(BALANCE)) + `</td>\n    <td colspan=\"2\"></td>\n    \n    </tr>\n    `;\n\n    $('#result').html(tr);\n    $(\"#loader\").removeClass('has-loader');\n    if (CrDrEntryType != \"\") {\n      $(`.` + CrDrEntryType).css(\"display\", \"none\");\n    }\n\n    AddHeaderTbl();\n  } else {\n    $('#result').html('<h1>No Data Found</h1>');\n    $(\"#loader\").removeClass('has-loader');\n  }\n\n\n}\nfunction CrDrTagforValue(value) {\n  var BalanceValue = value;\n  if (value < 0) {\n    BalanceValue = \"\" + (value);\n  } else if (value > 0) {\n    BalanceValue = \"\" + (value);\n  }\n  return BalanceValue\n}\n\n\nvar my_awesome_script = document.createElement('script');\nmy_awesome_script.setAttribute('src', 'js/jsPopUpModelParty.js');\ndocument.head.appendChild(my_awesome_script);\n"
        }
    ]
}