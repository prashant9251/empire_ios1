{
    "sourceFile": "js/jscreateDatabase.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1645505978517,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1645505997258,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,48 +1,49 @@\n \n-function createDatabase(Db,key) {\n-    return new Promise(function(resolve,reject){\n+function createDatabase(Db, key) {\n+    return new Promise(function (resolve, reject) {\n \n-    var database, idb_request;\n-    if (!('indexedDB' in window)) {\n-        alert('Error This browser doesn\\'t support IndexedDB');\n-        return;\n-      }\n-    var initializeMaster = {\n-        value: \"\",\n-        label: \"\",\n-        partyname: \"\",\n-        city: \"\",\n-        broker: \"\",\n-        ATYPE: \"\",\n-    };\n-    idb_request = window.indexedDB.open(Db, 1);\n+        var database, idb_request;\n+        if (!('indexedDB' in window)) {\n+            alert('Error This browser doesn\\'t support IndexedDB');\n+            return;\n+        }\n+        var initializeMaster = {\n+            value: \"\",\n+            label: \"\",\n+            partyname: \"\",\n+            city: \"\",\n+            broker: \"\",\n+            ATYPE: \"\",\n+        };\n+        idb_request = window.indexedDB.open(Db, 1);\n \n-    idb_request.addEventListener(\"error\", function (event) {\n-        alert(\n-            \"Error Could not open \" +\n+        idb_request.addEventListener(\"error\", function (event) {\n+            alert(\n+                \"Error Could not open \" +\n                 Db +\n                 \" databases due to error: \" +\n                 this.errorCode\n-        );\n-    });\n+            );\n+            reject(false);\n+        });\n \n-    idb_request.addEventListener(\"upgradeneeded\", function (event) {\n-        for (var i = 0; i < key.length; i++) {\n-            var storage = this.result.createObjectStore(key[i], {\n-                autoIncrement: true,\n-            });\n-            if (key[i] == \"ORDER\") {\n-                initializeMaster = [];\n+        idb_request.addEventListener(\"upgradeneeded\", function (event) {\n+            for (var i = 0; i < key.length; i++) {\n+                var storage = this.result.createObjectStore(key[i], {\n+                    autoIncrement: true,\n+                });\n+                if (key[i] == \"ORDER\") {\n+                    initializeMaster = [];\n+                }\n+                storage.add(initializeMaster, key[i]);\n+                console.log(initializeMaster);\n+                document.cookie =\n+                    key[i] +\n+                    \"_CREATETIME=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n             }\n-            storage.add(initializeMaster, key[i]);\n-            console.log(initializeMaster);\n-            document.cookie =\n-                key[i] +\n-                \"_CREATETIME=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n-        }\n-\n-        alert(\"Creating a new database!\");\n-        // document.location.href = \"./SYNCFIRM.php\";\n+            resolve(true);\n+            alert(\"Creating a new database!\");\n+            // document.location.href = \"./SYNCFIRM.php\";\n+        });\n     });\n-});\n }\n"
                },
                {
                    "date": 1645506004153,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -44,6 +44,9 @@\n             resolve(true);\n             alert(\"Creating a new database!\");\n             // document.location.href = \"./SYNCFIRM.php\";\n         });\n+        idb_request.addEventListener(\"success\", function (event) {\n+            resolve(true);\n+        });\n     });\n }\n"
                }
            ],
            "date": 1645505978517,
            "name": "Commit-0",
            "content": "\nfunction createDatabase(Db,key) {\n    return new Promise(function(resolve,reject){\n\n    var database, idb_request;\n    if (!('indexedDB' in window)) {\n        alert('Error This browser doesn\\'t support IndexedDB');\n        return;\n      }\n    var initializeMaster = {\n        value: \"\",\n        label: \"\",\n        partyname: \"\",\n        city: \"\",\n        broker: \"\",\n        ATYPE: \"\",\n    };\n    idb_request = window.indexedDB.open(Db, 1);\n\n    idb_request.addEventListener(\"error\", function (event) {\n        alert(\n            \"Error Could not open \" +\n                Db +\n                \" databases due to error: \" +\n                this.errorCode\n        );\n    });\n\n    idb_request.addEventListener(\"upgradeneeded\", function (event) {\n        for (var i = 0; i < key.length; i++) {\n            var storage = this.result.createObjectStore(key[i], {\n                autoIncrement: true,\n            });\n            if (key[i] == \"ORDER\") {\n                initializeMaster = [];\n            }\n            storage.add(initializeMaster, key[i]);\n            console.log(initializeMaster);\n            document.cookie =\n                key[i] +\n                \"_CREATETIME=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n        }\n\n        alert(\"Creating a new database!\");\n        // document.location.href = \"./SYNCFIRM.php\";\n    });\n});\n}\n"
        }
    ]
}