{
    "sourceFile": "jsonSyncToIndexeddb.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 33,
            "patches": [
                {
                    "date": 1637223952224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1637223987908,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -78,18 +78,18 @@\n       width = width;\n       if (width > 99) {\n         alert(lastUpdatetime);\n         // document.location.href = \"jsonHandler.php\";\n-      }      \n+      }\n       changeprogressBar(width)\n     }\n     $(document).ready(function () {\n       load_Data(loacCall);\n     });\n     function load_Data(callback) {\n       year = [\"2122\", \"2021\"]\n       for (var i = 0; i < year.length; i++) {\n-        createDatabase(ClDb + year[i],keyArrayInDatabase);\n+        createDatabase(ClDb + year[i], keyArrayInDatabase);\n       }\n       callback();\n     }\n     function loacCall(load_Data) {\n@@ -124,9 +124,11 @@\n               }\n             }\n           }\n           $('#demo').append(`<div id=` + key + `><h6>` + key + `</h6></div>`);\n-          console.log(data)\n+          if(key == \"BILLREC\"){\n+            console.log(data)\n+          }\n           if (JSON.parse(data).length > 0) {\n             storedatatoIndexdb(DSN, key, data).then(function (data) {\n               arr.push(key);\n               var size = xhttp.response.length;\n"
                },
                {
                    "date": 1637224010312,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -124,9 +124,9 @@\n               }\n             }\n           }\n           $('#demo').append(`<div id=` + key + `><h6>` + key + `</h6></div>`);\n-          if(key == \"BILLREC\"){\n+          if(key == \"compmst\"){\n             console.log(data)\n           }\n           if (JSON.parse(data).length > 0) {\n             storedatatoIndexdb(DSN, key, data).then(function (data) {\n"
                },
                {
                    "date": 1637224028908,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,207 @@\n+<!DOCTYPE html>\n+<html>\n+\n+<head>\n+  <script src=\"js/jsGetUrlParams.js\"></script>\n+  <script>\n+    var url = window.location.href;\n+    var DSN = getUrlParams(url, \"DatabaseSource\");\n+    var Currentyear = getUrlParams(url, \"Currentyear\");\n+    var CURRENT_YEAR = Currentyear;\n+    var ClDb = DSN.replace(Currentyear, \"\");\n+    var clnt = atob(ClDb);\n+    console.log(clnt);\n+    Curentyearforlocalstorage = '2122'\n+    var privateNetworkIp = getUrlParams(url, \"privateNetworkIp\");\n+    var privateNetWorkSync = getUrlParams(url, \"privateNetWorkSync\");\n+    var LFolder = getUrlParams(url, \"LFolder\");\n+\n+  </script>\n+  <title>CURRENT_YEAR</title>\n+  <style>\n+    #myProgress {\n+      width: 100%;\n+      background-color: grey;\n+    }\n+\n+    #myBar {\n+      width: 1%;\n+      height: 30px;\n+      background-color: #4CAF50;\n+      text-align: center;\n+      /* To center it horizontally (if you want) */\n+      line-height: 30px;\n+      /* To center it vertically */\n+      color: white;\n+    }\n+  </style>\n+  <link href=\"4.1.1/bootstrap.min.css\" rel=\"stylesheet\" id=\"bootstrap-css\">\n+  <link href=\"1.10.4/jquery-ui.css\" rel=\"stylesheet\">\n+  <script src=\"1.10.2/jquery.js\"></script>\n+  <script src=\"1.10.4/jquery-ui.js\"></script>\n+</head>\n+\n+<body>\n+\n+  <h2 id=\"currentYearHead\"></h2>\n+  <div id=\"myProgress\">\n+    <div id=\"myBar\"></div>\n+  </div>\n+  <div id=\"myPersent\">1%</div>\n+  <p id=\"demo\">SYNC DATA</p>\n+  <div id=\"forRetry\"></div>\n+\n+  <!-- <script src=\"js/jsprevents.js\"></script> -->\n+  <script src=\"2.1.3/jquery.min.js\"></script>\n+\n+  <script src=\"js/jsStoreDatatoIndexeddb.js\"></script>\n+  <script src=\"js/jscreateDatabase.js\"></script>\n+  <script src=\"jsKey.js\"></script>\n+\n+  <script>\n+\n+    document.getElementById('currentYearHead').innerHTML = \"YEAR-\" + CURRENT_YEAR;\n+    document.title = \"YEAR-\" + CURRENT_YEAR;\n+\n+    arr = [];\n+    failArr = [];\n+\n+    var lastUpdatetime;\n+\n+    var newDate = new Date();\n+    var width = 0;\n+    var keyLength\n+    function frame(width) {\n+      var elem = document.getElementById(\"myBar\");\n+      elem.style.width = width + \"%\";\n+      document.getElementById(\"myPersent\").innerHTML = Math.round(width) + \"%\"\n+      width = width;\n+      if (width > 99) {\n+        alert(lastUpdatetime);\n+        // document.location.href = \"jsonHandler.php\";\n+      }\n+      changeprogressBar(width)\n+    }\n+    $(document).ready(function () {\n+      load_Data(loacCall);\n+    });\n+    function load_Data(callback) {\n+      year = [\"2122\", \"2021\"]\n+      for (var i = 0; i < year.length; i++) {\n+        createDatabase(ClDb + year[i], keyArrayInDatabase);\n+      }\n+      callback();\n+    }\n+    function loacCall(load_Data) {\n+      keyLength = key.length;\n+      for (var i = 0; i < key.length; i++) {\n+        loadDoc(key[i]);\n+      }\n+    }\n+\n+\n+    // loadDoc(\"BLS\");\n+    function loadDoc(key) {\n+      var newDate = new Date();\n+      var data;\n+      var xhttp = new XMLHttpRequest();\n+      xhttp.onreadystatechange = function () {\n+        if (this.readyState == 4 && this.status == 200) {\n+\n+          data = this.responseText;\n+          // data=atob(data);\n+          if (key == 'TIME') {\n+            if (data.length > 0) {\n+              var TIMEarray = JSON.parse(data);\n+              if (TIMEarray.length > 0) {\n+                if (TIMEarray[0].TIME != undefined) {\n+                  var TIME = TIMEarray[0].TIME;\n+                  lastUpdatetime = TIME;\n+                  if (lastUpdatetime == undefined || lastUpdatetime == null) {\n+                    lastUpdatetime = \"\";\n+                  }\n+                }\n+              }\n+            }\n+          }\n+          $('#demo').append(`<div id=` + key + `><h6>` + key + `</h6></div>`);\n+          // if(key == \"COMPMST\"){\n+          //   console.log(data)\n+          // }\n+          if (JSON.parse(data).length > 0) {\n+            storedatatoIndexdb(DSN, key, data).then(function (data) {\n+              arr.push(key);\n+              var size = xhttp.response.length;\n+              $('#' + key).html(`<h6><span style='font-size:30px;color:green;'>&#10004;</span>` + key + `</h6>`);\n+              //   document.getElementById(\"demo\").innerHTML = +\" \"+size\n+              width = width + 100 / keyLength;\n+              frame(width);\n+            }, function (error) {\n+              console.log(error);\n+            });\n+          } else {\n+            $('#' + key).html(`<h6><span style='font-size:30px;color:green;'>&times;</span>` + key + `</h6>`);\n+            width = width + 100 / keyLength;\n+            frame(width);\n+          }\n+        }\n+      };\n+      var timeoutSecond;\n+      if (privateNetworkIp != \"\" && privateNetworkIp != null && privateNetWorkSync == \"true\") {\n+        timeoutSecond = 20;\n+        hostToSync = \"http://\" + privateNetworkIp;\n+        enc1 = \"VU5JUVVFU09GVFdBUkVT\";\n+        enc2 = \"U09GVFdBUkVTVU5JUVVF\";\n+        var URLKEY = hostToSync + \"/\" + LFolder + \"/js/\" + enc1 + ClDb + enc2 + \"/\" + Currentyear + \"/json/access.php?tm=\" + newDate;\n+        document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY WIFI\"\n+      } else {\n+        timeoutSecond = 25;\n+        //alert(URLKEY)\n+        var URLKEY = \"http://aashaimpex.com/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n+        document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n+      }\n+      xhttp.open(\"POST\", URLKEY, true);\n+      xhttp.onerror = function () {\n+        failArr.push(key)\n+        // loadDoc(key);\n+        $('#forRetry').html(`<button style=\"font-size:24px\" onclick=\"reloadPendingJson();\">Retry <i class=\"fa fa-refresh\"></i></button>`);\n+        console.log(failArr);\n+        $('#demo').append(`<div id=\"Errorkey\"><h6> Error Sync in ` + key + ` </h6></div>`);\n+      };\n+      xhttp.timeout = 1000 * timeoutSecond; // Set timeout to 4 seconds (4000 milliseconds)\n+      xhttp.ontimeout = function () {\n+        loadDoc(key);\n+        console.log(key, \"timeout\")\n+        $('#demo').append(`<div id=\"Retry` + key + `\"><h6>` + key + `: Timeout Auto Retry </h6></div>`);\n+      }\n+      xhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n+      xhttp.send(\"Musertoken=\" + ClDb + \"&key=\" + key);\n+    }\n+\n+    function reloadPendingJson() {\n+      $('#Errorkey').css(\"display\", \"none\");\n+      $('#Errorkey').hide();\n+      for (var i = 0; i < failArr.length; i++) {\n+        loadDoc(failArr[i]);\n+      }\n+\n+    }\n+\n+\n+    function changeprogressBar(persent) {\n+      try {\n+        Android.changeprogressBarTradingHome(persent);\n+        if (persent > 99) {\n+          if (Currentyear == Curentyearforlocalstorage) {\n+            Android.agencyHomeSetNewUpdateDate(lastUpdatetime);\n+          }\n+        }\n+      } catch (error) {\n+      }\n+    }\n+\n+  </script>\n+\n+</body>\n+\n+</html>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1638342873405,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -16,8 +16,9 @@\n     var privateNetWorkSync = getUrlParams(url, \"privateNetWorkSync\");\n     var LFolder = getUrlParams(url, \"LFolder\");\n \n   </script>\n+  <script src=\"js/localStorageSet.js\"></script>\n   <title>CURRENT_YEAR</title>\n   <style>\n     #myProgress {\n       width: 100%;\n@@ -203,212 +204,5 @@\n   </script>\n \n </body>\n \n-</html>\n-<!DOCTYPE html>\n-<html>\n-\n-<head>\n-  <script src=\"js/jsGetUrlParams.js\"></script>\n-  <script>\n-    var url = window.location.href;\n-    var DSN = getUrlParams(url, \"DatabaseSource\");\n-    var Currentyear = getUrlParams(url, \"Currentyear\");\n-    var CURRENT_YEAR = Currentyear;\n-    var ClDb = DSN.replace(Currentyear, \"\");\n-    var clnt = atob(ClDb);\n-    console.log(clnt);\n-    Curentyearforlocalstorage = '2122'\n-    var privateNetworkIp = getUrlParams(url, \"privateNetworkIp\");\n-    var privateNetWorkSync = getUrlParams(url, \"privateNetWorkSync\");\n-    var LFolder = getUrlParams(url, \"LFolder\");\n-\n-  </script>\n-  <title>CURRENT_YEAR</title>\n-  <style>\n-    #myProgress {\n-      width: 100%;\n-      background-color: grey;\n-    }\n-\n-    #myBar {\n-      width: 1%;\n-      height: 30px;\n-      background-color: #4CAF50;\n-      text-align: center;\n-      /* To center it horizontally (if you want) */\n-      line-height: 30px;\n-      /* To center it vertically */\n-      color: white;\n-    }\n-  </style>\n-  <link href=\"4.1.1/bootstrap.min.css\" rel=\"stylesheet\" id=\"bootstrap-css\">\n-  <link href=\"1.10.4/jquery-ui.css\" rel=\"stylesheet\">\n-  <script src=\"1.10.2/jquery.js\"></script>\n-  <script src=\"1.10.4/jquery-ui.js\"></script>\n-</head>\n-\n-<body>\n-\n-  <h2 id=\"currentYearHead\"></h2>\n-  <div id=\"myProgress\">\n-    <div id=\"myBar\"></div>\n-  </div>\n-  <div id=\"myPersent\">1%</div>\n-  <p id=\"demo\">SYNC DATA</p>\n-  <div id=\"forRetry\"></div>\n-\n-  <!-- <script src=\"js/jsprevents.js\"></script> -->\n-  <script src=\"2.1.3/jquery.min.js\"></script>\n-\n-  <script src=\"js/jsStoreDatatoIndexeddb.js\"></script>\n-  <script src=\"js/jscreateDatabase.js\"></script>\n-  <script src=\"jsKey.js\"></script>\n-\n-  <script>\n-\n-    document.getElementById('currentYearHead').innerHTML = \"YEAR-\" + CURRENT_YEAR;\n-    document.title = \"YEAR-\" + CURRENT_YEAR;\n-\n-    arr = [];\n-    failArr = [];\n-\n-    var lastUpdatetime;\n-\n-    var newDate = new Date();\n-    var width = 0;\n-    var keyLength\n-    function frame(width) {\n-      var elem = document.getElementById(\"myBar\");\n-      elem.style.width = width + \"%\";\n-      document.getElementById(\"myPersent\").innerHTML = Math.round(width) + \"%\"\n-      width = width;\n-      if (width > 99) {\n-        alert(lastUpdatetime);\n-        // document.location.href = \"jsonHandler.php\";\n-      }\n-      changeprogressBar(width)\n-    }\n-    $(document).ready(function () {\n-      load_Data(loacCall);\n-    });\n-    function load_Data(callback) {\n-      year = [\"2122\", \"2021\"]\n-      for (var i = 0; i < year.length; i++) {\n-        createDatabase(ClDb + year[i], keyArrayInDatabase);\n-      }\n-      callback();\n-    }\n-    function loacCall(load_Data) {\n-      keyLength = key.length;\n-      for (var i = 0; i < key.length; i++) {\n-        loadDoc(key[i]);\n-      }\n-    }\n-\n-\n-    // loadDoc(\"BLS\");\n-    function loadDoc(key) {\n-      var newDate = new Date();\n-      var data;\n-      var xhttp = new XMLHttpRequest();\n-      xhttp.onreadystatechange = function () {\n-        if (this.readyState == 4 && this.status == 200) {\n-\n-          data = this.responseText;\n-          // data=atob(data);\n-          if (key == 'TIME') {\n-            if (data.length > 0) {\n-              var TIMEarray = JSON.parse(data);\n-              if (TIMEarray.length > 0) {\n-                if (TIMEarray[0].TIME != undefined) {\n-                  var TIME = TIMEarray[0].TIME;\n-                  lastUpdatetime = TIME;\n-                  if (lastUpdatetime == undefined || lastUpdatetime == null) {\n-                    lastUpdatetime = \"\";\n-                  }\n-                }\n-              }\n-            }\n-          }\n-          $('#demo').append(`<div id=` + key + `><h6>` + key + `</h6></div>`);\n-          if(key == \"compmst\"){\n-            console.log(data)\n-          }\n-          if (JSON.parse(data).length > 0) {\n-            storedatatoIndexdb(DSN, key, data).then(function (data) {\n-              arr.push(key);\n-              var size = xhttp.response.length;\n-              $('#' + key).html(`<h6><span style='font-size:30px;color:green;'>&#10004;</span>` + key + `</h6>`);\n-              //   document.getElementById(\"demo\").innerHTML = +\" \"+size\n-              width = width + 100 / keyLength;\n-              frame(width);\n-            }, function (error) {\n-              console.log(error);\n-            });\n-          } else {\n-            $('#' + key).html(`<h6><span style='font-size:30px;color:green;'>&times;</span>` + key + `</h6>`);\n-            width = width + 100 / keyLength;\n-            frame(width);\n-          }\n-        }\n-      };\n-      var timeoutSecond;\n-      if (privateNetworkIp != \"\" && privateNetworkIp != null && privateNetWorkSync == \"true\") {\n-        timeoutSecond = 20;\n-        hostToSync = \"http://\" + privateNetworkIp;\n-        enc1 = \"VU5JUVVFU09GVFdBUkVT\";\n-        enc2 = \"U09GVFdBUkVTVU5JUVVF\";\n-        var URLKEY = hostToSync + \"/\" + LFolder + \"/js/\" + enc1 + ClDb + enc2 + \"/\" + Currentyear + \"/json/access.php?tm=\" + newDate;\n-        document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY WIFI\"\n-      } else {\n-        timeoutSecond = 25;\n-        //alert(URLKEY)\n-        var URLKEY = \"http://aashaimpex.com/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n-        document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n-      }\n-      xhttp.open(\"POST\", URLKEY, true);\n-      xhttp.onerror = function () {\n-        failArr.push(key)\n-        // loadDoc(key);\n-        $('#forRetry').html(`<button style=\"font-size:24px\" onclick=\"reloadPendingJson();\">Retry <i class=\"fa fa-refresh\"></i></button>`);\n-        console.log(failArr);\n-        $('#demo').append(`<div id=\"Errorkey\"><h6> Error Sync in ` + key + ` </h6></div>`);\n-      };\n-      xhttp.timeout = 1000 * timeoutSecond; // Set timeout to 4 seconds (4000 milliseconds)\n-      xhttp.ontimeout = function () {\n-        loadDoc(key);\n-        console.log(key, \"timeout\")\n-        $('#demo').append(`<div id=\"Retry` + key + `\"><h6>` + key + `: Timeout Auto Retry </h6></div>`);\n-      }\n-      xhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n-      xhttp.send(\"Musertoken=\" + ClDb + \"&key=\" + key);\n-    }\n-\n-    function reloadPendingJson() {\n-      $('#Errorkey').css(\"display\", \"none\");\n-      $('#Errorkey').hide();\n-      for (var i = 0; i < failArr.length; i++) {\n-        loadDoc(failArr[i]);\n-      }\n-\n-    }\n-\n-\n-    function changeprogressBar(persent) {\n-      try {\n-        Android.changeprogressBarTradingHome(persent);\n-        if (persent > 99) {\n-          if (Currentyear == Curentyearforlocalstorage) {\n-            Android.agencyHomeSetNewUpdateDate(lastUpdatetime);\n-          }\n-        }\n-      } catch (error) {\n-      }\n-    }\n-\n-  </script>\n-\n-</body>\n-\n </html>\n\\ No newline at end of file\n"
                },
                {
                    "date": 1642657150157,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -157,9 +157,9 @@\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY WIFI\"\n       } else {\n         timeoutSecond = 25;\n         //alert(URLKEY)\n-        var URLKEY = \"http://aashaimpex.com/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n+        var URLKEY = \"http://uniqsoftwares.com/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n       }\n       xhttp.open(\"POST\", URLKEY, true);\n       xhttp.onerror = function () {\n"
                },
                {
                    "date": 1642657168369,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -157,9 +157,9 @@\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY WIFI\"\n       } else {\n         timeoutSecond = 25;\n         //alert(URLKEY)\n-        var URLKEY = \"http://uniqsoftwares.com/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n+        var URLKEY = \"https://uniqsoftwares.com/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n       }\n       xhttp.open(\"POST\", URLKEY, true);\n       xhttp.onerror = function () {\n"
                },
                {
                    "date": 1642657889090,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -157,9 +157,9 @@\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY WIFI\"\n       } else {\n         timeoutSecond = 25;\n         //alert(URLKEY)\n-        var URLKEY = \"https://uniqsoftwares.com/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n+        var URLKEY = \"http://aashaimpex.com/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n       }\n       xhttp.open(\"POST\", URLKEY, true);\n       xhttp.onerror = function () {\n"
                },
                {
                    "date": 1643361543752,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -155,9 +155,9 @@\n         enc2 = \"U09GVFdBUkVTVU5JUVVF\";\n         var URLKEY = hostToSync + \"/\" + LFolder + \"/js/\" + enc1 + ClDb + enc2 + \"/\" + Currentyear + \"/json/access.php?tm=\" + newDate;\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY WIFI\"\n       } else {\n-        timeoutSecond = 25;\n+        timeoutSecond = 70;\n         //alert(URLKEY)\n         var URLKEY = \"http://aashaimpex.com/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n       }\n"
                },
                {
                    "date": 1643361553048,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -148,9 +148,9 @@\n         }\n       };\n       var timeoutSecond;\n       if (privateNetworkIp != \"\" && privateNetworkIp != null && privateNetWorkSync == \"true\") {\n-        timeoutSecond = 20;\n+        timeoutSecond = 60;\n         hostToSync = \"http://\" + privateNetworkIp;\n         enc1 = \"VU5JUVVFU09GVFdBUkVT\";\n         enc2 = \"U09GVFdBUkVTVU5JUVVF\";\n         var URLKEY = hostToSync + \"/\" + LFolder + \"/js/\" + enc1 + ClDb + enc2 + \"/\" + Currentyear + \"/json/access.php?tm=\" + newDate;\n"
                },
                {
                    "date": 1645505893275,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -83,16 +83,25 @@\n       }\n       changeprogressBar(width)\n     }\n     $(document).ready(function () {\n-      load_Data(loacCall);\n+      load_Data(Currentyear).then(function(d){\n+        keyLength=key.length;\n+        for (let i = 0; i < key.length; i++) {\n+              loadDoc(key[i]);\n+        }\n+      })\n     });\n-    function load_Data(callback) {\n-      year = [\"2122\", \"2021\"]\n-      for (var i = 0; i < year.length; i++) {\n-        createDatabase(ClDb + year[i], keyArrayInDatabase);\n-      }\n-      callback();\n+    function load_Data(year) {\n+      return new Promise(function(resolve,reject){\n+        createDatabase(ClDb + year, keyArrayInDatabase).then(function(d){\n+          console.log(d);\n+          resolve(d);\n+        },function(error){\n+          console.log(error);\n+          // reject(error);\n+        })\n+      })\n     }\n     function loacCall(load_Data) {\n       keyLength = key.length;\n       for (var i = 0; i < key.length; i++) {\n"
                },
                {
                    "date": 1645523717152,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,9 +162,9 @@\n         hostToSync = \"http://\" + privateNetworkIp;\n         enc1 = \"VU5JUVVFU09GVFdBUkVT\";\n         enc2 = \"U09GVFdBUkVTVU5JUVVF\";\n         var URLKEY = hostToSync + \"/\" + LFolder + \"/js/\" + enc1 + ClDb + enc2 + \"/\" + Currentyear + \"/json/access.php?tm=\" + newDate;\n-        document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY WIFI\"\n+        document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY PRIVATENETWORK IP :\"+privateNetworkIp\n       } else {\n         timeoutSecond = 70;\n         //alert(URLKEY)\n         var URLKEY = \"http://aashaimpex.com/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n"
                },
                {
                    "date": 1645523748340,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -162,9 +162,9 @@\n         hostToSync = \"http://\" + privateNetworkIp;\n         enc1 = \"VU5JUVVFU09GVFdBUkVT\";\n         enc2 = \"U09GVFdBUkVTVU5JUVVF\";\n         var URLKEY = hostToSync + \"/\" + LFolder + \"/js/\" + enc1 + ClDb + enc2 + \"/\" + Currentyear + \"/json/access.php?tm=\" + newDate;\n-        document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY PRIVATENETWORK IP :\"+privateNetworkIp\n+        document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY PRIVATE NETWORK IP :\"+privateNetworkIp\n       } else {\n         timeoutSecond = 70;\n         //alert(URLKEY)\n         var URLKEY = \"http://aashaimpex.com/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n"
                },
                {
                    "date": 1647857820033,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,11 +10,12 @@\n     var CURRENT_YEAR = Currentyear;\n     var ClDb = DSN.replace(Currentyear, \"\");\n     var clnt = atob(ClDb);\n     console.log(clnt);\n-    Curentyearforlocalstorage = '2122'\n     var privateNetworkIp = getUrlParams(url, \"privateNetworkIp\");\n     var privateNetWorkSync = getUrlParams(url, \"privateNetWorkSync\");\n+    var http = getUrlParams(url, \"http\");\n+    var ServerLocation = getUrlParams(url, \"ServerLocation\");\n     var LFolder = getUrlParams(url, \"LFolder\");\n \n   </script>\n   <script src=\"js/localStorageSet.js\"></script>\n@@ -166,9 +167,9 @@\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY PRIVATE NETWORK IP :\"+privateNetworkIp\n       } else {\n         timeoutSecond = 70;\n         //alert(URLKEY)\n-        var URLKEY = \"http://aashaimpex.com/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n+        var URLKEY = http+ServerLocation+\"/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n       }\n       xhttp.open(\"POST\", URLKEY, true);\n       xhttp.onerror = function () {\n"
                },
                {
                    "date": 1647857952174,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n <head>\n   <script src=\"js/jsGetUrlParams.js\"></script>\n   <script>\n     var url = window.location.href;\n+    console.log(url)\n     var DSN = getUrlParams(url, \"DatabaseSource\");\n     var Currentyear = getUrlParams(url, \"Currentyear\");\n     var CURRENT_YEAR = Currentyear;\n     var ClDb = DSN.replace(Currentyear, \"\");\n"
                },
                {
                    "date": 1647859706323,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,9 @@\n <head>\n   <script src=\"js/jsGetUrlParams.js\"></script>\n   <script>\n     var url = window.location.href;\n-    console.log(url)\n+    console.log(url);\n     var DSN = getUrlParams(url, \"DatabaseSource\");\n     var Currentyear = getUrlParams(url, \"Currentyear\");\n     var CURRENT_YEAR = Currentyear;\n     var ClDb = DSN.replace(Currentyear, \"\");\n"
                },
                {
                    "date": 1647859726399,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -203,8 +203,9 @@\n     function changeprogressBar(persent) {\n       try {\n         Android.changeprogressBarTradingHome(persent);\n         if (persent > 99) {\n+          console.log(Currentyear,Curentyearforlocalstorage);\n           if (Currentyear == Curentyearforlocalstorage) {\n             Android.agencyHomeSetNewUpdateDate(lastUpdatetime);\n           }\n         }\n"
                },
                {
                    "date": 1647859946566,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -199,13 +199,13 @@\n \n     }\n \n \n+    console.log(Currentyear,Curentyearforlocalstorage);\n     function changeprogressBar(persent) {\n       try {\n         Android.changeprogressBarTradingHome(persent);\n         if (persent > 99) {\n-          console.log(Currentyear,Curentyearforlocalstorage);\n           if (Currentyear == Curentyearforlocalstorage) {\n             Android.agencyHomeSetNewUpdateDate(lastUpdatetime);\n           }\n         }\n"
                },
                {
                    "date": 1647860092108,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -58,8 +58,9 @@\n   <script src=\"2.1.3/jquery.min.js\"></script>\n \n   <script src=\"js/jsStoreDatatoIndexeddb.js\"></script>\n   <script src=\"js/jscreateDatabase.js\"></script>\n+  <script src=\"js/jsGetObjectByKey.js\"></script>\n   <script src=\"jsKey.js\"></script>\n \n   <script>\n \n"
                },
                {
                    "date": 1647860261415,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,8 @@\n <head>\n   <script src=\"js/jsGetUrlParams.js\"></script>\n   <script>\n     var url = window.location.href;\n-    console.log(url);\n     var DSN = getUrlParams(url, \"DatabaseSource\");\n     var Currentyear = getUrlParams(url, \"Currentyear\");\n     var CURRENT_YEAR = Currentyear;\n     var ClDb = DSN.replace(Currentyear, \"\");\n"
                },
                {
                    "date": 1647860282224,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -171,8 +171,9 @@\n         //alert(URLKEY)\n         var URLKEY = http+ServerLocation+\"/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n       }\n+      console.log(URLKEY)\n       xhttp.open(\"POST\", URLKEY, true);\n       xhttp.onerror = function () {\n         failArr.push(key)\n         // loadDoc(key);\n"
                },
                {
                    "date": 1647860430169,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -163,9 +163,9 @@\n         timeoutSecond = 60;\n         hostToSync = \"http://\" + privateNetworkIp;\n         enc1 = \"VU5JUVVFU09GVFdBUkVT\";\n         enc2 = \"U09GVFdBUkVTVU5JUVVF\";\n-        var URLKEY = hostToSync + \"/\" + LFolder + \"/js/\" + enc1 + ClDb + enc2 + \"/\" + Currentyear + \"/json/access.php?tm=\" + newDate;\n+        var URLKEY = hostToSync + \"/\" + LFolder + \"/js/\" + enc1 + ClDb + enc2 + \"/\" + Currentyear + \"/json/access.php?tm=\" + newDate+\"Musertoken=\" + ClDb + \"&key=\" + key;\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY PRIVATE NETWORK IP :\"+privateNetworkIp\n       } else {\n         timeoutSecond = 70;\n         //alert(URLKEY)\n"
                },
                {
                    "date": 1647860495678,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,8 +4,9 @@\n <head>\n   <script src=\"js/jsGetUrlParams.js\"></script>\n   <script>\n     var url = window.location.href;\n+    console.log(url);\n     var DSN = getUrlParams(url, \"DatabaseSource\");\n     var Currentyear = getUrlParams(url, \"Currentyear\");\n     var CURRENT_YEAR = Currentyear;\n     var ClDb = DSN.replace(Currentyear, \"\");\n@@ -163,17 +164,16 @@\n         timeoutSecond = 60;\n         hostToSync = \"http://\" + privateNetworkIp;\n         enc1 = \"VU5JUVVFU09GVFdBUkVT\";\n         enc2 = \"U09GVFdBUkVTVU5JUVVF\";\n-        var URLKEY = hostToSync + \"/\" + LFolder + \"/js/\" + enc1 + ClDb + enc2 + \"/\" + Currentyear + \"/json/access.php?tm=\" + newDate+\"Musertoken=\" + ClDb + \"&key=\" + key;\n+        var URLKEY = hostToSync + \"/\" + LFolder + \"/js/\" + enc1 + ClDb + enc2 + \"/\" + Currentyear + \"/json/access.php?tm=\" + newDate;\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY PRIVATE NETWORK IP :\"+privateNetworkIp\n       } else {\n         timeoutSecond = 70;\n         //alert(URLKEY)\n         var URLKEY = http+ServerLocation+\"/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n       }\n-      console.log(URLKEY)\n       xhttp.open(\"POST\", URLKEY, true);\n       xhttp.onerror = function () {\n         failArr.push(key)\n         // loadDoc(key);\n"
                },
                {
                    "date": 1647860521255,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -4,9 +4,8 @@\n <head>\n   <script src=\"js/jsGetUrlParams.js\"></script>\n   <script>\n     var url = window.location.href;\n-    console.log(url);\n     var DSN = getUrlParams(url, \"DatabaseSource\");\n     var Currentyear = getUrlParams(url, \"Currentyear\");\n     var CURRENT_YEAR = Currentyear;\n     var ClDb = DSN.replace(Currentyear, \"\");\n@@ -140,8 +139,9 @@\n           $('#demo').append(`<div id=` + key + `><h6>` + key + `</h6></div>`);\n           // if(key == \"COMPMST\"){\n           //   console.log(data)\n           // }\n+          console.log(data);\n           if (JSON.parse(data).length > 0) {\n             storedatatoIndexdb(DSN, key, data).then(function (data) {\n               arr.push(key);\n               var size = xhttp.response.length;\n"
                },
                {
                    "date": 1647860567862,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -139,9 +139,9 @@\n           $('#demo').append(`<div id=` + key + `><h6>` + key + `</h6></div>`);\n           // if(key == \"COMPMST\"){\n           //   console.log(data)\n           // }\n-          console.log(data);\n+          // console.log(data);\n           if (JSON.parse(data).length > 0) {\n             storedatatoIndexdb(DSN, key, data).then(function (data) {\n               arr.push(key);\n               var size = xhttp.response.length;\n"
                },
                {
                    "date": 1647860592223,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,8 +117,9 @@\n       var newDate = new Date();\n       var data;\n       var xhttp = new XMLHttpRequest();\n       xhttp.onreadystatechange = function () {\n+        console.log(key);\n         if (this.readyState == 4 && this.status == 200) {\n \n           data = this.responseText;\n           // data=atob(data);\n"
                },
                {
                    "date": 1647860654339,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -117,9 +117,8 @@\n       var newDate = new Date();\n       var data;\n       var xhttp = new XMLHttpRequest();\n       xhttp.onreadystatechange = function () {\n-        console.log(key);\n         if (this.readyState == 4 && this.status == 200) {\n \n           data = this.responseText;\n           // data=atob(data);\n"
                },
                {
                    "date": 1647860695325,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -136,12 +136,9 @@\n               }\n             }\n           }\n           $('#demo').append(`<div id=` + key + `><h6>` + key + `</h6></div>`);\n-          // if(key == \"COMPMST\"){\n-          //   console.log(data)\n-          // }\n-          // console.log(data);\n+      \n           if (JSON.parse(data).length > 0) {\n             storedatatoIndexdb(DSN, key, data).then(function (data) {\n               arr.push(key);\n               var size = xhttp.response.length;\n"
                },
                {
                    "date": 1647860700432,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -142,9 +142,8 @@\n             storedatatoIndexdb(DSN, key, data).then(function (data) {\n               arr.push(key);\n               var size = xhttp.response.length;\n               $('#' + key).html(`<h6><span style='font-size:30px;color:green;'>&#10004;</span>` + key + `</h6>`);\n-              //   document.getElementById(\"demo\").innerHTML = +\" \"+size\n               width = width + 100 / keyLength;\n               frame(width);\n             }, function (error) {\n               console.log(error);\n"
                },
                {
                    "date": 1647860717801,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -156,16 +156,16 @@\n         }\n       };\n       var timeoutSecond;\n       if (privateNetworkIp != \"\" && privateNetworkIp != null && privateNetWorkSync == \"true\") {\n-        timeoutSecond = 60;\n+        timeoutSecond = 90;\n         hostToSync = \"http://\" + privateNetworkIp;\n         enc1 = \"VU5JUVVFU09GVFdBUkVT\";\n         enc2 = \"U09GVFdBUkVTVU5JUVVF\";\n         var URLKEY = hostToSync + \"/\" + LFolder + \"/js/\" + enc1 + ClDb + enc2 + \"/\" + Currentyear + \"/json/access.php?tm=\" + newDate;\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY PRIVATE NETWORK IP :\"+privateNetworkIp\n       } else {\n-        timeoutSecond = 70;\n+        timeoutSecond = 120;\n         //alert(URLKEY)\n         var URLKEY = http+ServerLocation+\"/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n       }\n"
                },
                {
                    "date": 1647862537617,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -80,9 +80,8 @@\n       document.getElementById(\"myPersent\").innerHTML = Math.round(width) + \"%\"\n       width = width;\n       if (width > 99) {\n         alert(lastUpdatetime);\n-        // document.location.href = \"jsonHandler.php\";\n       }\n       changeprogressBar(width)\n     }\n     $(document).ready(function () {\n"
                },
                {
                    "date": 1654953628592,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -84,21 +84,21 @@\n       }\n       changeprogressBar(width)\n     }\n     $(document).ready(function () {\n-      load_Data(Currentyear).then(function(d){\n-        keyLength=key.length;\n+      load_Data(Currentyear).then(function (d) {\n+        keyLength = key.length;\n         for (let i = 0; i < key.length; i++) {\n-              loadDoc(key[i]);\n+          loadDoc(key[i]);\n         }\n       })\n     });\n     function load_Data(year) {\n-      return new Promise(function(resolve,reject){\n-        createDatabase(ClDb + year, keyArrayInDatabase).then(function(d){\n+      return new Promise(function (resolve, reject) {\n+        createDatabase(ClDb + year, keyArrayInDatabase).then(function (d) {\n           console.log(d);\n           resolve(d);\n-        },function(error){\n+        }, function (error) {\n           console.log(error);\n           // reject(error);\n         })\n       })\n@@ -135,9 +135,9 @@\n               }\n             }\n           }\n           $('#demo').append(`<div id=` + key + `><h6>` + key + `</h6></div>`);\n-      \n+\n           if (JSON.parse(data).length > 0) {\n             storedatatoIndexdb(DSN, key, data).then(function (data) {\n               arr.push(key);\n               var size = xhttp.response.length;\n@@ -160,13 +160,13 @@\n         hostToSync = \"http://\" + privateNetworkIp;\n         enc1 = \"VU5JUVVFU09GVFdBUkVT\";\n         enc2 = \"U09GVFdBUkVTVU5JUVVF\";\n         var URLKEY = hostToSync + \"/\" + LFolder + \"/js/\" + enc1 + ClDb + enc2 + \"/\" + Currentyear + \"/json/access.php?tm=\" + newDate;\n-        document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY PRIVATE NETWORK IP :\"+privateNetworkIp\n+        document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY PRIVATE NETWORK IP :\" + privateNetworkIp\n       } else {\n         timeoutSecond = 120;\n         //alert(URLKEY)\n-        var URLKEY = http+ServerLocation+\"/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n+        var URLKEY = http + ServerLocation + \"/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n       }\n       xhttp.open(\"POST\", URLKEY, true);\n       xhttp.onerror = function () {\n@@ -195,9 +195,9 @@\n \n     }\n \n \n-    console.log(Currentyear,Curentyearforlocalstorage);\n+    console.log(Currentyear, Curentyearforlocalstorage);\n     function changeprogressBar(persent) {\n       try {\n         Android.changeprogressBarTradingHome(persent);\n         if (persent > 99) {\n"
                },
                {
                    "date": 1660546425899,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -164,9 +164,10 @@\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY PRIVATE NETWORK IP :\" + privateNetworkIp\n       } else {\n         timeoutSecond = 120;\n         //alert(URLKEY)\n-        var URLKEY = http + ServerLocation + \"/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n+        var URLKEY = http + ServerLocation + \"/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + extraPath + Currentyear + \"/access.php?tm=\" + newDate;\n+\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n       }\n       xhttp.open(\"POST\", URLKEY, true);\n       xhttp.onerror = function () {\n"
                },
                {
                    "date": 1660546431530,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -165,9 +165,8 @@\n       } else {\n         timeoutSecond = 120;\n         //alert(URLKEY)\n         var URLKEY = http + ServerLocation + \"/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + extraPath + Currentyear + \"/access.php?tm=\" + newDate;\n-\n         document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n       }\n       xhttp.open(\"POST\", URLKEY, true);\n       xhttp.onerror = function () {\n"
                }
            ],
            "date": 1637223952223,
            "name": "Commit-0",
            "content": "<!DOCTYPE html>\n<html>\n\n<head>\n  <script src=\"js/jsGetUrlParams.js\"></script>\n  <script>\n    var url = window.location.href;\n    var DSN = getUrlParams(url, \"DatabaseSource\");\n    var Currentyear = getUrlParams(url, \"Currentyear\");\n    var CURRENT_YEAR = Currentyear;\n    var ClDb = DSN.replace(Currentyear, \"\");\n    var clnt = atob(ClDb);\n    console.log(clnt);\n    Curentyearforlocalstorage = '2122'\n    var privateNetworkIp = getUrlParams(url, \"privateNetworkIp\");\n    var privateNetWorkSync = getUrlParams(url, \"privateNetWorkSync\");\n    var LFolder = getUrlParams(url, \"LFolder\");\n\n  </script>\n  <title>CURRENT_YEAR</title>\n  <style>\n    #myProgress {\n      width: 100%;\n      background-color: grey;\n    }\n\n    #myBar {\n      width: 1%;\n      height: 30px;\n      background-color: #4CAF50;\n      text-align: center;\n      /* To center it horizontally (if you want) */\n      line-height: 30px;\n      /* To center it vertically */\n      color: white;\n    }\n  </style>\n  <link href=\"4.1.1/bootstrap.min.css\" rel=\"stylesheet\" id=\"bootstrap-css\">\n  <link href=\"1.10.4/jquery-ui.css\" rel=\"stylesheet\">\n  <script src=\"1.10.2/jquery.js\"></script>\n  <script src=\"1.10.4/jquery-ui.js\"></script>\n</head>\n\n<body>\n\n  <h2 id=\"currentYearHead\"></h2>\n  <div id=\"myProgress\">\n    <div id=\"myBar\"></div>\n  </div>\n  <div id=\"myPersent\">1%</div>\n  <p id=\"demo\">SYNC DATA</p>\n  <div id=\"forRetry\"></div>\n\n  <!-- <script src=\"js/jsprevents.js\"></script> -->\n  <script src=\"2.1.3/jquery.min.js\"></script>\n\n  <script src=\"js/jsStoreDatatoIndexeddb.js\"></script>\n  <script src=\"js/jscreateDatabase.js\"></script>\n  <script src=\"jsKey.js\"></script>\n\n  <script>\n\n    document.getElementById('currentYearHead').innerHTML = \"YEAR-\" + CURRENT_YEAR;\n    document.title = \"YEAR-\" + CURRENT_YEAR;\n\n    arr = [];\n    failArr = [];\n\n    var lastUpdatetime;\n\n    var newDate = new Date();\n    var width = 0;\n    var keyLength\n    function frame(width) {\n      var elem = document.getElementById(\"myBar\");\n      elem.style.width = width + \"%\";\n      document.getElementById(\"myPersent\").innerHTML = Math.round(width) + \"%\"\n      width = width;\n      if (width > 99) {\n        alert(lastUpdatetime);\n        // document.location.href = \"jsonHandler.php\";\n      }      \n      changeprogressBar(width)\n    }\n    $(document).ready(function () {\n      load_Data(loacCall);\n    });\n    function load_Data(callback) {\n      year = [\"2122\", \"2021\"]\n      for (var i = 0; i < year.length; i++) {\n        createDatabase(ClDb + year[i],keyArrayInDatabase);\n      }\n      callback();\n    }\n    function loacCall(load_Data) {\n      keyLength = key.length;\n      for (var i = 0; i < key.length; i++) {\n        loadDoc(key[i]);\n      }\n    }\n\n\n    // loadDoc(\"BLS\");\n    function loadDoc(key) {\n      var newDate = new Date();\n      var data;\n      var xhttp = new XMLHttpRequest();\n      xhttp.onreadystatechange = function () {\n        if (this.readyState == 4 && this.status == 200) {\n\n          data = this.responseText;\n          // data=atob(data);\n          if (key == 'TIME') {\n            if (data.length > 0) {\n              var TIMEarray = JSON.parse(data);\n              if (TIMEarray.length > 0) {\n                if (TIMEarray[0].TIME != undefined) {\n                  var TIME = TIMEarray[0].TIME;\n                  lastUpdatetime = TIME;\n                  if (lastUpdatetime == undefined || lastUpdatetime == null) {\n                    lastUpdatetime = \"\";\n                  }\n                }\n              }\n            }\n          }\n          $('#demo').append(`<div id=` + key + `><h6>` + key + `</h6></div>`);\n          console.log(data)\n          if (JSON.parse(data).length > 0) {\n            storedatatoIndexdb(DSN, key, data).then(function (data) {\n              arr.push(key);\n              var size = xhttp.response.length;\n              $('#' + key).html(`<h6><span style='font-size:30px;color:green;'>&#10004;</span>` + key + `</h6>`);\n              //   document.getElementById(\"demo\").innerHTML = +\" \"+size\n              width = width + 100 / keyLength;\n              frame(width);\n            }, function (error) {\n              console.log(error);\n            });\n          } else {\n            $('#' + key).html(`<h6><span style='font-size:30px;color:green;'>&times;</span>` + key + `</h6>`);\n            width = width + 100 / keyLength;\n            frame(width);\n          }\n        }\n      };\n      var timeoutSecond;\n      if (privateNetworkIp != \"\" && privateNetworkIp != null && privateNetWorkSync == \"true\") {\n        timeoutSecond = 20;\n        hostToSync = \"http://\" + privateNetworkIp;\n        enc1 = \"VU5JUVVFU09GVFdBUkVT\";\n        enc2 = \"U09GVFdBUkVTVU5JUVVF\";\n        var URLKEY = hostToSync + \"/\" + LFolder + \"/js/\" + enc1 + ClDb + enc2 + \"/\" + Currentyear + \"/json/access.php?tm=\" + newDate;\n        document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY WIFI\"\n      } else {\n        timeoutSecond = 25;\n        //alert(URLKEY)\n        var URLKEY = \"http://aashaimpex.com/CLIENT/DATA/\" + clnt + \"/\" + ClDb + \"/\" + Currentyear + \"/access.php?tm=\" + newDate;\n        document.getElementById(\"demo\").innerHTML = \"SYNC DATA BY INTERNET\"\n      }\n      xhttp.open(\"POST\", URLKEY, true);\n      xhttp.onerror = function () {\n        failArr.push(key)\n        // loadDoc(key);\n        $('#forRetry').html(`<button style=\"font-size:24px\" onclick=\"reloadPendingJson();\">Retry <i class=\"fa fa-refresh\"></i></button>`);\n        console.log(failArr);\n        $('#demo').append(`<div id=\"Errorkey\"><h6> Error Sync in ` + key + ` </h6></div>`);\n      };\n      xhttp.timeout = 1000 * timeoutSecond; // Set timeout to 4 seconds (4000 milliseconds)\n      xhttp.ontimeout = function () {\n        loadDoc(key);\n        console.log(key, \"timeout\")\n        $('#demo').append(`<div id=\"Retry` + key + `\"><h6>` + key + `: Timeout Auto Retry </h6></div>`);\n      }\n      xhttp.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n      xhttp.send(\"Musertoken=\" + ClDb + \"&key=\" + key);\n    }\n\n    function reloadPendingJson() {\n      $('#Errorkey').css(\"display\", \"none\");\n      $('#Errorkey').hide();\n      for (var i = 0; i < failArr.length; i++) {\n        loadDoc(failArr[i]);\n      }\n\n    }\n\n\n    function changeprogressBar(persent) {\n      try {\n        Android.changeprogressBarTradingHome(persent);\n        if (persent > 99) {\n          if (Currentyear == Curentyearforlocalstorage) {\n            Android.agencyHomeSetNewUpdateDate(lastUpdatetime);\n          }\n        }\n      } catch (error) {\n      }\n    }\n\n  </script>\n\n</body>\n\n</html>"
        }
    ]
}