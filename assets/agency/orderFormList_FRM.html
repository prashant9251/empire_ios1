<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script src="2.1.3/jquery.min.js"></script>
    <script src="3.3.6/bootstrap.min.js"></script>
    <link href="3.3.6/bootstrap.min.css" rel="stylesheet" />
    <script src="js/jsGetUrlParams.js"></script>


</head>

<script>
    var url = window.location.href;
    var MCNO = getUrlParams(url, "MCNO");
    var MTYPE = getUrlParams(url, "MTYPE");
    var DSN = getUrlParams(url, "DatabaseSource");
    var Currentyear = getUrlParams(url, "Currentyear");
        //alert(DSN);

</script>
<script src="js/localStorageGet.js"></script>
<script src="js/jsGetObjectByKey.js"></script>
<script src="js/jsStoreDatatoIndexeddb.js"></script>
<script src="js/jsPopUpTblSetting.js"></script>
<script src="js/jsoptionSeriesSelect.js"></script>
<script src="js/jsoptionFirmSelect.js"></script>
<script src="js/jsSearchfrm.js"></script>
<html>

<head>
    <title>ORDER LIST FORM</title>
    <link href="4.1.1/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link href="1.10.4/jquery-ui.css" rel="stylesheet">
    <script src="1.10.4/jquery-ui.js"></script>
    <link rel="stylesheet" href="css/stylePrint.css">
    <link rel="stylesheet" href="css/styleAutoComplete.css">

</head>

<body>


  
    <BR>



    <div class="container" style="width: 100%;">

        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card">
                    <header class="card-header">
                        <h2 class="card-title mt-2">ORDER LIST FORM</h2>
                    </header>
                    <article class="card-body">
                        <!-- <form action="orderFormList.html" method="get" target="_blank" autocomplete="off"> -->


                            <div class="form-row">
                                <div class="col form-group">
                                    <h3>FIRM</h3>
                                    <select class="form-control inputText" style="height: 40px;" id="FIRM" name="FIRM">
                                    </select>
                                </div>

                                <div class="col form-group">
                                    <h3>STATUS</h3>
                                    <select class="form-control inputText" style="height: 40px;"
                                        onchange="myFunction(this)" id="dispatchCondition" name="dispatchCondition">
                                        <option value="N" data-name="PENDING ORDER">PENDING ORDER</option>
                                        <option value="Y" data-name="DISPATCHED ORDER">DISPATCHED ORDER</option>
                                        <option value="" data-name="ALL ORDER">ALL</option>
                                    </select>
                                </div>
                                <div style="display: none;" class="col form-group">
                                    <h3>TYPE</h3>
                                    <input type="text" required class="form-control inputText" onfocus="this.value=''"
                                        placeholder="REPORT TYPE" value="" name="ReportType" id="ReportType">
                                    <input type="hidden" class="form-control inputText" onfocus="this.value=''"
                                        placeholder="REPORT TYPE" value="" name="ReportATypeCode" id="ReportATypeCode">
                                    <input type="hidden" class="form-control inputText" onfocus="this.value=''"
                                        placeholder="REPORT TYPE" value="" name="ReportSeriesTypeCode"
                                        id="ReportSeriesTypeCode">
                                    <input type="hidden" class="form-control inputText" onfocus="this.value=''"
                                        placeholder="REPORT TYPE" value="" name="ReportDOC_TYPECode"
                                        id="ReportDOC_TYPECode">
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="">
                                    <h3>PARTY NAME</h3>
                                    <input class="form-control inputText" onfocus="this.value=''" autocomplete="off"
                                        onchange="" placeholder="SEARCH BY PARTY NAME" name="partyname" id="partyname">
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="col form-group">
                                    <h3>BROKER</h3>
                                    <input class="form-control inputText" onfocus="this.value=''" autocomplete="off"
                                        name="broker" id="broker" placeholder="SEARCH BY BROKER NAME">
                                </div>
                                <div class="col form-group">
                                    <h3>CITY</h3>
                                    <input class="form-control inputText" onfocus="this.value=''" autocomplete="off"
                                        name="city" id="city" placeholder="SEARCH BY CITY NAME">
                                </div>


                            </div>
                            <div class="form-row">
                                <div class="col form-group">
                                    <h3>HASTE</h3>
                                    <input class="form-control inputText" onfocus="this.value=''" autocomplete="off"
                                        name="haste" id="haste" placeholder="SEARCH BY HASTE">
                                </div>
                                <div class="col form-group">
                                    <h3>QUALITY</h3>
                                    <input class="form-control inputText" onfocus="this.value=''" autocomplete="off"
                                        name="qualname" id="qualname" placeholder="SEARCH BY QUALITY NAME">
                                </div>

                            </div>
                            <div class="form-row">
                                <div class="col form-group">
                                    <h3>FROM</h3>
                                    <input type="date" class="form-control inputText" placeholder="SEARCH FROM DATE"
                                        value="" name="search_FromDate" id="search_FromDate">
                                </div>

                                <div class="col form-group">
                                    <h3>TO</h3>
                                    <input type="date" class="form-control inputText" placeholder="SEARCH TO DATE"
                                        value="" name="search_ToDate" id="search_ToDate">
                                </div>
                            </div>
                            <div class="form-group">
                                <input type="hidden" class="form-control " id="firm" name="firm"
                                    value="AASHA SILK MILLS" placeholder="hidden party code">
                                <input type="hidden" class="form-control" id="partycode" name="partycode"
                                    placeholder="hidden party code">
                                <input type="hidden" class="form-control" id="ntab" name="ntab" value="NTAB"
                                    placeholder="hidden party code">
                            </div>


                            <div class="form-group">

                                <input type="submit" name="submit" id="submit" onclick="openOrderList();"
                                    class="btn btn-primary btn-lg btn-block inputText" value="SUBMIT" id="submit">
                            </div>
                </div>
            </div>

            <!-- </form> -->
        </div>
    </div>
    </div>

</body>


</html>

<script>
    $(document).ready(function () {
        SelectFirmOptions("FIRM");
        CheckBoxOption("productDet", "SL_productDet")
    });
    jsGetObjectByKey(DSN, "QUL", "").then(function (data) {
        QULData = data;
        $("#qualname").keyup(function (e) {
            if (e.which == 38 || e.which == 40 || e.which == 13) {
                return;
            } else {
                var qual = $(this).val();
                //alert(qual);
                if (qual !== "") {
                    if (QULData.length > 0) {
                        //console.log("----" + qual);
                        $("#qualname").autocomplete({
                            minLength: 1,
                            source: function (request, response) {
                                var term = $.ui.autocomplete.escapeRegex(
                                    request.term
                                ),
                                    startsWithMatcher = new RegExp("^" + term, "i"),
                                    startsWith = $.grep(QULData, function (
                                        value
                                    ) {
                                        return startsWithMatcher.test(
                                            value.label || value.value || value
                                        );
                                    }),
                                    containsMatcher = new RegExp(term, "i"),
                                    contains = $.grep(QULData, function (value) {
                                        return (
                                            $.inArray(value, startsWith) < 0 &&
                                            containsMatcher.test(
                                                value.label || value.value || value
                                            )
                                        );
                                    });

                                response(startsWith.concat(contains));
                            },
                            select: function (event, ui) {
                                event.preventDefault();
                                $(this).val(ui.item.label);
                                $("#qualcode").val(ui.item.value);
                                $("#qualname").val(ui.item.label);
                            },
                        });
                    }
                }

            }
        });
    })
    function openOrderList(){
                try {
        var partycode=$("#partycode").val();
        var broker=$("#broker").val();
        var FIRM=$("#FIRM").val();
        var city=$("#city").val();
        var haste=$("#haste").val();
        var qualname=$("#qualname").val();
        var dispatchCondition=$("#dispatchCondition").val();
        var searchObj={};
        searchObj['partycode']=partycode;
        searchObj['broker']=broker;
        searchObj['FIRM']=FIRM;
        searchObj['city']=city;
        searchObj['haste']=haste;
        searchObj['qualname']=qualname;
        searchObj['dispatchCondition']=dispatchCondition;
        
            window.flutter_inappwebview.callHandler("openOrderList",  searchObj).then(function (result) {
                    // alert(text);
                    resolve(key);
                },
                function (err) {
                    reject(key);
                }
                );
            } catch (error) {
            alert(error);
            }
    }

    function myFunction(sel) {
        var opt = sel.options[sel.selectedIndex];
        var ReportType = opt.dataset.name
        //console.log(ReportType);
        document.getElementById("ReportType").value =  ReportType;
    }
</script>